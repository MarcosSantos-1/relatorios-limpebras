"use strict";exports.id=477,exports.ids=[477],exports.modules={34567:(a,b,c)=>{c.d(b,{A:()=>h});var d=c(21124),e=c(38301),f=c(59009),g=c(80974);function h({onUploadComplete:a}){let[b,c]=(0,e.useState)(null),[h,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)(!1),l=(0,e.useRef)(null),m=a=>{a.preventDefault(),a.stopPropagation(),"dragenter"===a.type||"dragover"===a.type?k(!0):"dragleave"===a.type&&k(!1)},n=async()=>{if(!b)return void g.oR.error("Selecione um arquivo primeiro");i(!0);try{console.log("\uD83D\uDE80 Iniciando upload simplificado...");let d=Date.now(),e=b.name.replace(/[^a-zA-Z0-9.-]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),h=`${d}_${e}`,i=`uploads/${h}`;console.log("\uD83D\uDCC2 Caminho do arquivo:",i);let{data:j,error:k}=await f.ND.storage.from("documentos").upload(i,b);if(k)throw console.error("❌ Erro no upload:",k),Error(`Erro no upload: ${k.message}`);console.log("✅ Upload conclu\xeddo:",j);let{data:{publicUrl:m}}=f.ND.storage.from("documentos").getPublicUrl(i);console.log("\uD83D\uDD17 URL p\xfablica:",m);let n={nome:b.name,tipo:b.name.toLowerCase().endsWith(".pdf")?"PDF":b.name.toLowerCase().match(/\.(jpg|jpeg|png|gif|bmp|webp|tiff)$/)?"IMAGEM":"EXCEL",categoria:"OUTROS",descricao:`Upload simplificado - ${new Date().toLocaleString("pt-BR")}`,url:m,tamanho:b.size,user_id:null,tags:["upload-simples"]},{error:o}=await f.ND.from("documentos").insert([n]);o&&console.warn("⚠️ Erro ao salvar no banco (mas upload foi feito):",o),g.oR.success("Arquivo enviado com sucesso!"),a&&a(m,b.name),c(null),l.current&&(l.current.value="")}catch(a){console.error("❌ Erro no upload:",a),g.oR.error(`Erro ao fazer upload: ${a.message||"Erro desconhecido"}`)}finally{i(!1)}};return(0,d.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-6 w-full max-w-2xl",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-6 text-zinc-900 dark:text-zinc-100",children:"\uD83D\uDCC1 Upload Simples de Documentos"}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:`relative w-full h-40 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${j?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-zinc-300 dark:border-zinc-600 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-750 hover:border-indigo-500"}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:a=>{a.preventDefault(),a.stopPropagation(),k(!1),a.dataTransfer.files&&a.dataTransfer.files[0]&&(c(a.dataTransfer.files[0]),g.oR.success("Arquivo selecionado!"))},onClick:()=>l.current?.click(),children:[(0,d.jsx)("input",{ref:l,type:"file",accept:".pdf,.xlsx,.xls,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif,.bmp,.webp,.tiff",onChange:a=>{a.target.files&&a.target.files[0]&&(c(a.target.files[0]),g.oR.success("Arquivo selecionado!"))},className:"hidden"}),(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,d.jsx)("svg",{className:"w-12 h-12 mb-4 text-zinc-500 dark:text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,d.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 text-center",children:[(0,d.jsx)("span",{className:"font-medium",children:"Clique para selecionar"}),(0,d.jsx)("br",{}),"ou arraste e solte o arquivo aqui"]}),(0,d.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-500 mt-2",children:"PDF, Excel, Word, Fotos/Imagens (m\xe1x. 50MB)"})]})]}),b&&(0,d.jsx)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("span",{className:"text-green-600 dark:text-green-400 text-2xl",children:b.name.toLowerCase().endsWith(".pdf")?"\uD83D\uDCC4":b.name.toLowerCase().endsWith(".xlsx")||b.name.toLowerCase().endsWith(".xls")?"\uD83D\uDCCA":b.name.toLowerCase().endsWith(".doc")||b.name.toLowerCase().endsWith(".docx")?"\uD83D\uDCDD":b.name.toLowerCase().match(/\.(jpg|jpeg|png|gif|bmp|webp|tiff)$/)?"\uD83D\uDDBC️":"\uD83D\uDCC1"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:b.name}),(0,d.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400",children:(a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,b)).toFixed(2))+" "+["Bytes","KB","MB","GB"][b]})(b.size)})]})]}),(0,d.jsx)("button",{type:"button",onClick:()=>{c(null),l.current&&(l.current.value="")},className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,d.jsx)("button",{onClick:n,disabled:!b||h,className:"w-full bg-indigo-600 hover:bg-indigo-500 disabled:bg-zinc-400 text-white py-3 px-6 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:h?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Enviar Arquivo"]})}),(0,d.jsxs)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 text-center",children:[(0,d.jsx)("p",{children:"✅ Upload direto para nuvem"}),(0,d.jsx)("p",{children:"✅ Sem necessidade de login"}),(0,d.jsx)("p",{children:"✅ Acesso de qualquer dispositivo"})]})]})]})}},53479:(a,b,c)=>{c.d(b,{I:()=>f});var d=c(38301),e=c(59009);function f(){let[a,b]=(0,d.useState)([]),[c,f]=(0,d.useState)(!0),[g,h]=(0,d.useState)(null),i=async()=>{try{f(!0),h(null),console.log("\uD83D\uDD0D Buscando documentos no Supabase...");let{data:a,error:c}=await e.ND.from("documentos").select("*").order("created_at",{ascending:!1});if(c)throw console.error("❌ Erro ao buscar documentos:",c),c;console.log("✅ Documentos encontrados:",a);let d=a?.map(a=>({id:a.id,nome:a.nome,tipo:a.tipo,categoria:a.categoria||"OUTROS",descricao:a.descricao,url:a.url,tamanho:a.tamanho||0,userId:a.user_id,tags:a.tags||[],createdAt:a.created_at?new Date(a.created_at).getTime():Date.now(),updatedAt:a.updated_at?new Date(a.updated_at).getTime():Date.now()}))||[];b(d)}catch(a){console.error("❌ Erro ao buscar documentos:",a),h(a.message)}finally{f(!1)}};return{documentos:a,loading:c,error:g,addDocumento:async a=>{try{console.log("\uD83D\uDCBE Salvando documento no Supabase...",a);let{data:{user:b},error:c}=await e.ND.auth.getUser();if(c||!b)throw Error("Usu\xe1rio n\xe3o autenticado");let d={nome:a.nome,tipo:a.tipo,categoria:a.categoria||"OUTROS",descricao:a.descricao,url:a.url,tamanho:a.tamanho,user_id:b.id,tags:a.tags||[]};console.log("\uD83D\uDCCB Dados para inserir:",d);let{data:f,error:g}=await e.ND.from("documentos").insert([d]).select().single();if(g)throw console.error("❌ Erro ao salvar documento:",g),g;return console.log("✅ Documento salvo com sucesso:",f),await i(),f.id}catch(a){throw console.error("❌ Erro ao adicionar documento:",a),a}},updateDocumento:async(a,b)=>{try{console.log("\uD83D\uDD04 Atualizando documento:",a,b);let c={nome:b.nome,tipo:b.tipo,categoria:b.categoria,descricao:b.descricao,url:b.url,tamanho:b.tamanho,tags:b.tags,updated_at:new Date().toISOString()},{data:d,error:f}=await e.ND.from("documentos").update(c).eq("id",a).select().single();if(f)throw console.error("❌ Erro ao atualizar documento:",f),f;return console.log("✅ Documento atualizado:",d),await i(),d.id}catch(a){throw console.error("❌ Erro ao atualizar documento:",a),a}},deleteDocumento:async a=>{try{console.log("\uD83D\uDDD1️ Deletando documento:",a);let{error:b}=await e.ND.from("documentos").delete().eq("id",a);if(b)throw console.error("❌ Erro ao deletar documento:",b),b;console.log("✅ Documento deletado com sucesso"),await i()}catch(a){throw console.error("❌ Erro ao deletar documento:",a),a}},refetch:i}}},59009:(a,b,c)=>{c.d(b,{ND:()=>g});var d=c(29209);let e=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://rzurwjixlqremctcpwhk.supabase.co",f=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6dXJ3aml4bHFyZW1jdGNwd2hrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MzI1OTAsImV4cCI6MjA3NDQwODU5MH0.0h2LZLii3bQrV1anVQ9VIPog6RfHO9RuhI22G4V994Y",g=(0,d.UU)(e,f,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}};