(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6071],{1130:(e,r,t)=>{Promise.resolve().then(t.bind(t,3195))},3195:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var a=t(5155),o=t(2115),s=t(3372),i=t(6020),c=t(4744);function n(e){let{params:r}=e,{id:t}=(0,o.use)(r),[n,d]=(0,o.useState)(null),[l,x]=(0,o.useState)(!0),[m,b]=(0,o.useState)(""),[u,h]=(0,o.useState)(!1);async function p(e,r){if(e.size>5242880)return void c.oR.error("\uD83D\uDCC1 Arquivo muito grande. M\xe1ximo 5MB.",{position:"top-center",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark",style:{background:"#dc2626",border:"1px solid #ef4444",color:"#f9fafb"}});try{let t=await function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.7;return new Promise(a=>{let o=document.createElement("canvas"),s=o.getContext("2d"),i=new Image;i.onload=()=>{let{width:e,height:c}=i;e>r&&(c=c*r/e,e=r),o.width=e,o.height=c,null==s||s.drawImage(i,0,0,e,c),a(o.toDataURL("image/jpeg",t))},i.src=URL.createObjectURL(e)})}(e);r(t)}catch(e){console.error("Erro ao comprimir imagem:",e),c.oR.error("❌ Erro ao processar imagem.",{position:"top-center",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark",style:{background:"#dc2626",border:"1px solid #ef4444",color:"#f9fafb"}})}}async function g(){if(n){h(!0);try{let e={...n,updatedAt:Date.now()};await (0,s.wt)(e),c.oR.success("Relat\xf3rio atualizado com sucesso!"),window.location.href="/relatorios/".concat(t)}catch(e){console.error("Erro ao salvar:",e),c.oR.error("Erro ao salvar relat\xf3rio.")}finally{h(!1)}}}if((0,o.useEffect)(()=>{(async()=>{try{console.log("\uD83D\uDD0D Carregando relat\xf3rio para edi\xe7\xe3o com ID:",t);let e=await (0,s.ly)(t);console.log("\uD83D\uDCCA Relat\xf3rio carregado para edi\xe7\xe3o:",e),e?(d(e),b("")):b("Relat\xf3rio n\xe3o encontrado")}catch(e){console.error("❌ Erro ao carregar relat\xf3rio para edi\xe7\xe3o:",e),b("Erro ao carregar relat\xf3rio")}finally{x(!1)}})()},[t]),l)return(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"text-zinc-600 dark:text-zinc-400",children:"Carregando relat\xf3rio..."})});if(m||!n)return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"text-red-600 dark:text-red-400",children:["Erro: ",m||"Relat\xf3rio n\xe3o encontrado"]}),(0,a.jsx)("button",{onClick:()=>window.location.href="/relatorios",className:"mt-4 px-3 py-2 bg-zinc-600 hover:bg-zinc-500 text-white rounded",children:"Voltar para Lista"})]});let z="MUTIRAO"===n.tipoServico,v=["ACUMULADOR","ALAGAMENTOS","ZELADORIA","HIGIENIZACAO","VARRICAO_MECANIZADA","FEIRAS"].includes(n.tipoServico),f="REVITALIZACAO"===n.tipoServico,j="DDS"===n.tipoServico,k="EVENTOS"===n.tipoServico,N="ROTINEIROS"===n.tipoServico;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 text-white shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,a.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"✏️ Editar Relat\xf3rio"}),(0,a.jsxs)("p",{className:"text-blue-100",children:[z&&"Edite as informa\xe7\xf5es do mutir\xe3o",v&&"Edite as informa\xe7\xf5es do registro",f&&"Edite as informa\xe7\xf5es da revitaliza\xe7\xe3o",N&&"Edite as informa\xe7\xf5es dos servi\xe7os rotineiros",j&&"Edite as informa\xe7\xf5es do DDS",k&&"Edite as informa\xe7\xf5es dos eventos"]})]}),(0,a.jsxs)("button",{onClick:()=>window.location.href="/relatorios/".concat(t),className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-colors duration-200 flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar"]})]})}),z&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Dados do Mutir\xe3o"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Data"}),(0,a.jsx)("input",{type:"date",value:n.data,onChange:e=>d({...n,data:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"T\xedtulo"}),(0,a.jsx)("input",{type:"text",value:n.title,onChange:e=>d({...n,title:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]})]})]}),(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Quantitativo Estimado"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.quantitativo.map((e,r)=>{let t="decimal"===e.tipo,o=e.descricao.includes("Colaboradores")||e.descricao.includes("Varri\xe7\xe3o")||e.descricao.includes("Bocas de lobo")||e.descricao.includes("Volume de res\xedduos");return(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("div",{className:"text-sm w-2/3 font-semibold ".concat(o?"text-purple-800 dark:text-purple-300":"text-zinc-900 dark:text-zinc-300"),children:e.descricao}),(0,a.jsx)("input",{value:e.quantidade,onChange:t=>{let a=function(e,r){if(!e)return"";let t=e.replace(/[^\d,.-]/g,"");if("quantidade"===r)return t.replace(/[^\d]/g,"");{let e=t.split(/[,.]/);return e.length>2?e[0]+","+e.slice(1).join(""):t.replace(".",",")}}(t.target.value,e.tipo||"quantidade"),o=[...n.quantitativo];o[r].quantidade=a,d({...n,quantitativo:o})},onBlur:t=>{let a=function(e,r){if(!e||""===e.trim())return"";if("decimal"===r){if(!e.includes(",")&&!e.includes("."))return e+",00";if(e.includes(",")&&""===e.split(",")[1])return e+"00";if(e.includes(",")&&1===e.split(",")[1].length)return e+"0"}return e}(t.target.value,e.tipo||"quantidade");if(a!==t.target.value){let e=[...n.quantitativo];e[r].quantidade=a,d({...n,quantitativo:e})}},className:"px-3 py-2 rounded border w-1/3 font-semibold transition-all duration-200 ".concat(o?"bg-purple-200 dark:bg-purple-900/30 text-purple-900 dark:text-purple-100 border-purple-300 dark:border-purple-600 focus:border-purple-500 dark:focus:border-purple-500 focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-700 focus:shadow-md":"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 border-zinc-300 dark:border-zinc-700 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"),placeholder:t?"0,0":"0",type:"text",inputMode:t?"decimal":"numeric"})]},r)})})]}),n.secoes.map((e,r)=>(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:["Se\xe7\xe3o ",r+1]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Sub-regi\xe3o"}),(0,a.jsxs)("select",{value:e.sub,onChange:e=>{let t=[...n.secoes];t[r].sub=e.target.value,d({...n,secoes:t})},className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold",children:[(0,a.jsx)("option",{value:"SP",children:i.iU.SP}),(0,a.jsx)("option",{value:"CV",children:i.iU.CV}),(0,a.jsx)("option",{value:"JT",children:i.iU.JT}),(0,a.jsx)("option",{value:"MG",children:i.iU.MG}),(0,a.jsx)("option",{value:"ST",children:i.iU.ST})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Local"}),(0,a.jsx)("input",{type:"text",value:e.local,onChange:e=>{let t=[...n.secoes];t[r].local=e.target.value,d({...n,secoes:t})},className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Descri\xe7\xe3o"}),(0,a.jsx)("textarea",{value:e.descricao,onChange:e=>{let t=[...n.secoes];t[r].descricao=e.target.value,d({...n,secoes:t})},rows:3,className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Foto da Equipe"}),e.equipeFotoUrl&&(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,a.jsx)("img",{src:e.equipeFotoUrl,alt:"Foto da equipe",className:"w-32 h-32 object-cover rounded border border-zinc-300 dark:border-zinc-600"}),(0,a.jsx)("button",{onClick:()=>{let e=[...n.secoes];e[r].equipeFotoUrl="",d({...n,secoes:e})},className:"px-2 py-1 bg-red-600 hover:bg-red-500 text-white text-xs rounded",children:"\uD83D\uDDD1️ Remover"})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&p(a,e=>{let t=[...n.secoes];t[r].equipeFotoUrl=e,d({...n,secoes:t})})},className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Foto do Mapa"}),e.mapaFotoUrl&&(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,a.jsx)("img",{src:e.mapaFotoUrl,alt:"Foto do mapa",className:"w-32 h-32 object-cover rounded border border-zinc-300 dark:border-zinc-600"}),(0,a.jsx)("button",{onClick:()=>{let e=[...n.secoes];e[r].mapaFotoUrl="",d({...n,secoes:e})},className:"px-2 py-1 bg-red-600 hover:bg-red-500 text-white text-xs rounded",children:"\uD83D\uDDD1️ Remover"})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&p(a,e=>{let t=[...n.secoes];t[r].mapaFotoUrl=e,d({...n,secoes:t})})},className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-2",children:"INFORMA\xc7\xd5ES"}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.informacoes.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("input",{type:"text",value:e.ordem,onChange:e=>{let a=[...n.secoes];a[r].informacoes[t].ordem=parseInt(e.target.value)||0,d({...n,secoes:a})},className:"w-16 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-2 py-1 rounded border border-zinc-300 dark:border-zinc-700 text-sm",placeholder:"Item"}),(0,a.jsx)("input",{type:"text",value:e.descricao,onChange:e=>{let a=[...n.secoes];a[r].informacoes[t].descricao=e.target.value,d({...n,secoes:a})},className:"flex-1 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold",placeholder:"Descri\xe7\xe3o do item..."}),(0,a.jsx)("button",{onClick:()=>{let e=[...n.secoes];e[r].informacoes.splice(t,1),d({...n,secoes:e})},className:"px-2 py-1 bg-red-600 hover:bg-red-500 text-white text-xs rounded",children:"\uD83D\uDDD1️ Remover"})]},t)),(0,a.jsx)("button",{onClick:()=>{let e=[...n.secoes];e[r].informacoes.push({ordem:e[r].informacoes.length+1,descricao:""}),d({...n,secoes:e})},className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white text-sm rounded",children:"Adicionar Item"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-2",children:"Servi\xe7os Executados"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:i.ZU.map(t=>{let o=e.servicos.some(e=>e.assunto===t);return(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:o,onChange:()=>{let e=[...n.secoes];o?e[r].servicos=e[r].servicos.filter(e=>e.assunto!==t):e[r].servicos.push({assunto:t,fotos:[]}),d({...n,secoes:e})},className:"w-4 h-4 text-indigo-600 bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600 rounded focus:ring-indigo-500"}),(0,a.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:t})]},t)})})]}),e.servicos.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-2",children:"Fotos dos Servi\xe7os"}),(0,a.jsx)("div",{className:"space-y-3",children:e.servicos.map((e,t)=>(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"font-medium text-zinc-900 dark:text-zinc-200",children:e.assunto}),(0,a.jsx)("button",{onClick:()=>{let e=[...n.secoes];e[r].servicos.splice(t,1),d({...n,secoes:e})},className:"p-2 bg-red-100 hover:bg-red-200 dark:bg-red-600 dark:hover:bg-red-500 text-red-600 dark:text-white rounded-lg transition-colors duration-200 flex items-center justify-center",title:"Remover servi\xe7o",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:e.fotos.map((o,s)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:o.url,alt:"".concat(e.assunto," - ").concat(o.etapa),className:"w-full h-32 object-cover rounded border border-zinc-600",onError:e=>{console.error("Erro ao carregar imagem:",o.url),e.currentTarget.style.display="none"},onLoad:()=>{console.log("Imagem carregada com sucesso:",o.url.substring(0,50)+"...")}}),(0,a.jsx)("button",{onClick:()=>{let e=[...n.secoes];e[r].servicos[t].fotos.splice(s,1),d({...n,secoes:e})},className:"absolute top-1 right-1 px-1 py-0.5 bg-red-600 hover:bg-red-500 text-white text-xs rounded",children:"\xd7"})]}),(0,a.jsx)("input",{type:"text",value:o.descricao,onChange:e=>{let a=[...n.secoes];a[r].servicos[t].fotos[s].descricao=e.target.value,d({...n,secoes:a})},className:"w-full bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100 px-2 py-1 rounded border border-zinc-300 dark:border-zinc-600 text-xs",placeholder:"Descri\xe7\xe3o ".concat(o.etapa,"...")})]},s))}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{Array.from(e.target.files||[]).sort((e,r)=>{let t=e=>{let r=e.match(/(\d+)/);return r?parseInt(r[1]):0},a=t(e.name),o=t(r.name);return a>0&&o>0?a-o:e.name.localeCompare(r.name)}).forEach((e,a)=>{setTimeout(()=>{p(e,e=>{let a=[...n.secoes];a[r].servicos[t].fotos.push({url:e,etapa:"Adicional",descricao:""}),d({...n,secoes:a})})},100*a)})},className:"w-full bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-600 text-sm"})})]},t))})]})]},r))]}),N&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Dados dos Servi\xe7os Rotineiros"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Assunto"}),(0,a.jsx)("input",{type:"text",value:n.assunto,disabled:!0,className:"w-full bg-zinc-200 dark:bg-zinc-700 text-zinc-900 dark:text-zinc-300 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-600 font-semibold cursor-not-allowed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Data"}),(0,a.jsx)("input",{type:"date",value:n.data,onChange:e=>d({...n,data:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Sub-regi\xe3o"}),(0,a.jsxs)("select",{value:n.sub,onChange:e=>d({...n,sub:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold",children:[(0,a.jsx)("option",{value:"SP",children:i.iU.SP}),(0,a.jsx)("option",{value:"CV",children:i.iU.CV}),(0,a.jsx)("option",{value:"JT",children:i.iU.JT}),(0,a.jsx)("option",{value:"MG",children:i.iU.MG}),(0,a.jsx)("option",{value:"ST",children:i.iU.ST})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Servi\xe7os Executados"}),n.servicos.map((e,r)=>(0,a.jsxs)("div",{className:"bg-zinc-200 dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-700 rounded p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"font-medium text-zinc-900 dark:text-zinc-200",children:e.assunto}),(0,a.jsx)("button",{onClick:()=>{let e=[...n.servicos];e.splice(r,1),d({...n,servicos:e})},className:"px-2 py-1 bg-red-600 hover:bg-red-500 text-white text-xs rounded",children:"Remover Servi\xe7o"})]}),e.fotos.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-3",children:e.fotos.map((t,o)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:t.url,alt:"".concat(e.assunto," - Foto ").concat(o+1),className:"w-full h-32 object-cover rounded border border-zinc-300 dark:border-zinc-600"}),(0,a.jsx)("button",{onClick:()=>{let e=[...n.servicos];e[r].fotos.splice(o,1),d({...n,servicos:e})},className:"absolute top-1 right-1 px-1 py-0.5 bg-red-600 hover:bg-red-500 text-white text-xs rounded",children:"\xd7"})]}),(0,a.jsx)("input",{type:"text",value:t.descricao,onChange:e=>{let t=[...n.servicos];t[r].fotos[o].descricao=e.target.value,d({...n,servicos:t})},className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-2 py-1 rounded border border-zinc-300 dark:border-zinc-700 text-sm",placeholder:"Descri\xe7\xe3o da foto..."})]},o))}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Fotos: ",e.fotos.length,"/10"]}),(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:async t=>{let a=Array.from(t.target.files||[]),o=10-e.fotos.length;if(o<=0)return void c.oR.warning("Limite m\xe1ximo de 10 fotos atingido para este servi\xe7o.");let s=a.slice(0,o);try{let e=s.map(e=>new Promise(r=>{p(e,r)})),t=await Promise.all(e),a=[...n.servicos];t.forEach(e=>{a[r].fotos.push({url:e,descricao:""})}),d({...n,servicos:a}),c.oR.success("".concat(t.length," foto(s) adicionada(s) com sucesso!"))}catch(e){console.error("Erro ao fazer upload:",e),c.oR.error("Erro ao fazer upload das fotos.")}},className:"w-full bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-600 text-sm"})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Observa\xe7\xe3o"}),(0,a.jsx)("textarea",{value:e.observacao||"",onChange:e=>{let t=[...n.servicos];t[r].observacao=e.target.value,d({...n,servicos:t})},rows:2,className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold",placeholder:"Observa\xe7\xf5es sobre este servi\xe7o..."})]})]},r)),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-md font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Adicionar Novo Servi\xe7o"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:i.ZU.map(e=>{let r=n.servicos.some(r=>r.assunto===e);return(0,a.jsx)("button",{onClick:()=>{if(r)return void c.oR.warning("Este servi\xe7o j\xe1 foi adicionado.");let t=[...n.servicos,{assunto:e,fotos:[],observacao:""}];d({...n,servicos:t})},disabled:r,className:"p-2 rounded text-sm font-medium transition-colors ".concat(r?"bg-zinc-300 dark:bg-zinc-600 text-zinc-500 dark:text-zinc-400 cursor-not-allowed":"bg-green-600 hover:bg-green-500 text-white hover:shadow-md"),children:e},e)})})]})]})]}),j&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Dados do DDS"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Assunto"}),(0,a.jsx)("input",{type:"text",value:n.assunto,onChange:e=>d({...n,assunto:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Data"}),(0,a.jsx)("input",{type:"date",value:n.data,onChange:e=>d({...n,data:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Sub-regi\xe3o"}),(0,a.jsx)("select",{value:n.sub,onChange:e=>d({...n,sub:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold",children:(0,a.jsx)("option",{value:"SP",children:i.iU.SP})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Local"}),(0,a.jsx)("input",{type:"text",value:n.local||"",onChange:e=>d({...n,local:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-300 mb-1",children:"Descri\xe7\xe3o"}),(0,a.jsx)("textarea",{value:n.descricao||"",onChange:e=>d({...n,descricao:e.target.value}),rows:3,className:"w-full bg-zinc-800 text-zinc-100 px-3 py-2 rounded border border-zinc-700 font-semibold"})]})]}),(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Fotos do DDS por Setor/Servi\xe7o"}),Object.entries(n.fotos.reduce((e,r)=>(e[r.descricao]||(e[r.descricao]=[]),e[r.descricao].push(r),e),{})).map(e=>{let[r,t]=e;return(0,a.jsxs)("div",{className:"mb-6 p-4 bg-zinc-200 dark:bg-zinc-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"font-medium text-zinc-900 dark:text-zinc-200",children:r}),(0,a.jsxs)("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:[t.length," fotos"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:t.map((e,t)=>(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e.url,alt:"".concat(r," - ").concat(t+1),className:"w-full h-20 object-cover rounded border border-zinc-300 dark:border-zinc-600"}),(0,a.jsx)("button",{onClick:()=>{let r=n.fotos.filter(r=>r.url!==e.url);d({...n,fotos:r})},className:"absolute top-1 right-1 w-5 h-5 bg-red-600 hover:bg-red-500 text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:"\xd7"}),(0,a.jsx)("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white text-xs px-1 rounded",children:t+1})]})},t))})]},r)}),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"font-medium",children:["Adicionar Fotos ao DDS (",n.fotos.length,"/∞)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:async e=>{let r=Array.from(e.target.files||[]).sort((e,r)=>{let t=e=>{let r=e.match(/(\d+)/);return r?parseInt(r[1]):0},a=t(e.name),o=t(r.name);return a>0&&o>0?a-o:e.name.localeCompare(r.name)});try{let e=r.map(e=>new Promise(r=>{p(e,r)})),t=await Promise.all(e),a=[...n.fotos];t.forEach((e,r)=>{a.push({url:e,descricao:"DDS",ordem:n.fotos.length+r+1})}),d({...n,fotos:a}),c.oR.success("".concat(t.length," foto(s) adicionada(s) com sucesso!"))}catch(e){c.oR.error("Erro ao fazer upload das fotos.")}},className:"hidden",id:"multiple-photo-upload-dds"}),(0,a.jsxs)("label",{htmlFor:"multiple-photo-upload-dds",className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium cursor-pointer transition-all duration-200 shadow-lg bg-indigo-600 hover:bg-indigo-500 hover:shadow-indigo-500/25 text-white hover:scale-105",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Adicionar Foto"]})]})]})})]})]}),!1,v&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Dados do Registro"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Assunto"}),(0,a.jsx)("input",{type:"text",value:n.assunto,onChange:e=>d({...n,assunto:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Sub-regi\xe3o"}),(0,a.jsxs)("select",{value:n.sub,onChange:e=>d({...n,sub:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold",children:[(0,a.jsx)("option",{value:"SP",children:i.iU.SP}),(0,a.jsx)("option",{value:"CV",children:i.iU.CV}),(0,a.jsx)("option",{value:"JT",children:i.iU.JT}),(0,a.jsx)("option",{value:"MG",children:i.iU.MG}),(0,a.jsx)("option",{value:"ST",children:i.iU.ST})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Data In\xedcio"}),(0,a.jsx)("input",{type:"date",value:n.dataInicio,onChange:e=>d({...n,dataInicio:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Data T\xe9rmino"}),(0,a.jsx)("input",{type:"date",value:n.dataTermino,onChange:e=>d({...n,dataTermino:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Local"}),(0,a.jsx)("input",{type:"text",value:n.local,onChange:e=>d({...n,local:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-300 mb-1",children:"Descri\xe7\xe3o"}),(0,a.jsx)("textarea",{value:n.descricao,onChange:e=>d({...n,descricao:e.target.value}),rows:3,className:"w-full bg-zinc-800 text-zinc-100 px-3 py-2 rounded border border-zinc-700 font-semibold"})]})]}),(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Fotos do Registro"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:n.fotos.map((e,r)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e.url,alt:"Foto ".concat(r+1),className:"w-full h-40 object-cover rounded border border-zinc-300 dark:border-zinc-600"}),(0,a.jsx)("button",{onClick:()=>{let e=[...n.fotos];e.splice(r,1),d({...n,fotos:e})},className:"absolute top-1 right-1 px-1 py-0.5 bg-red-600 hover:bg-red-500 text-white text-xs rounded",children:"\xd7"})]}),(0,a.jsx)("input",{type:"text",value:e.descricao,onChange:e=>{let t=[...n.fotos];t[r].descricao=e.target.value,d({...n,fotos:t})},className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-2 py-1 rounded border border-zinc-300 dark:border-zinc-700 text-sm",placeholder:"Digite a descri\xe7\xe3o da foto..."})]},r))}),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"font-medium",children:["Fotos do Registro (",n.fotos.length,"/20)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:async e=>{let r=Array.from(e.target.files||[]),t=n.fotos,a=20-t.length;if(a<=0)return void c.oR.warning("Limite m\xe1ximo de 20 fotos atingido.");let o=r.slice(0,a).sort((e,r)=>{let t=e=>{let r=e.match(/(\d+)/);return r?parseInt(r[1]):0},a=t(e.name),o=t(r.name);return a>0&&o>0?a-o:e.name.localeCompare(r.name)});try{let e=o.map(e=>new Promise(r=>{p(e,r)})),s=await Promise.all(e),i=[...t];s.forEach((e,r)=>{i.push({url:e,descricao:"",ordem:t.length+r+1})}),d({...n,fotos:i}),r.length>a?c.oR.warning("Apenas ".concat(a," fotos foram adicionadas. Limite m\xe1ximo de 20 fotos.")):c.oR.success("".concat(s.length," foto(s) adicionada(s) com sucesso!"))}catch(e){c.oR.error("Erro ao fazer upload das fotos.")}},className:"hidden",id:"multiple-photo-upload-registro",disabled:n.fotos.length>=20}),(0,a.jsxs)("label",{htmlFor:"multiple-photo-upload-registro",className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium cursor-pointer transition-all duration-200 shadow-lg ".concat(n.fotos.length>=20?"bg-zinc-500 text-zinc-300 cursor-not-allowed shadow-none":"bg-indigo-600 hover:bg-indigo-500 hover:shadow-indigo-500/25 text-white hover:scale-105"),children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Adicionar Foto"]})]})]})})]})]}),f&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Dados da Revitaliza\xe7\xe3o"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Assunto"}),(0,a.jsx)("input",{type:"text",value:n.assunto,onChange:e=>d({...n,assunto:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Data"}),(0,a.jsx)("input",{type:"date",value:n.data,onChange:e=>d({...n,data:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Sub-regi\xe3o"}),(0,a.jsxs)("select",{value:n.sub,onChange:e=>d({...n,sub:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold",children:[(0,a.jsx)("option",{value:"SP",children:i.iU.SP}),(0,a.jsx)("option",{value:"CV",children:i.iU.CV}),(0,a.jsx)("option",{value:"JT",children:i.iU.JT}),(0,a.jsx)("option",{value:"MG",children:i.iU.MG}),(0,a.jsx)("option",{value:"ST",children:i.iU.ST})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Local"}),(0,a.jsx)("input",{type:"text",value:n.local,onChange:e=>d({...n,local:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Frequ\xeancia"}),(0,a.jsxs)("select",{value:n.frequencia||"",onChange:e=>d({...n,frequencia:e.target.value}),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold",children:[(0,a.jsx)("option",{value:"",children:"Selecione a frequ\xeancia"}),(0,a.jsx)("option",{value:"Bissemanal",children:"Bissemanal"}),(0,a.jsx)("option",{value:"Semanal",children:"Semanal"}),(0,a.jsx)("option",{value:"Di\xe1rio",children:"Di\xe1rio"}),(0,a.jsx)("option",{value:"Alternado",children:"Alternado"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-700 dark:text-zinc-300 mb-1",children:"Peso"}),(0,a.jsx)("input",{type:"text",value:n.peso||"",onChange:e=>(function(e){let r=function(e){let r=e.replace(/\D/g,"");if(!r)return"";let t=parseInt(r).toLocaleString("pt-BR");return"".concat(t," kg")}(e.replace(/[^\d]/g,""));d({...n,peso:r})})(e.target.value),className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold",placeholder:"Digite apenas n\xfameros (ex: 1000)"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-300 mb-1",children:"Descri\xe7\xe3o"}),(0,a.jsx)("textarea",{value:n.descricao,onChange:e=>d({...n,descricao:e.target.value}),rows:3,className:"w-full bg-zinc-800 text-zinc-100 px-3 py-2 rounded border border-zinc-700 font-semibold"})]})]}),(0,a.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-zinc-900 dark:text-zinc-100",children:"Fotos da Revitaliza\xe7\xe3o"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:n.fotos.map((e,r)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e.url,alt:"".concat(e.etapa," - ").concat(r+1),className:"w-full h-40 object-cover rounded border border-zinc-300 dark:border-zinc-600"}),(0,a.jsx)("button",{onClick:()=>{let e=[...n.fotos];e.splice(r,1),d({...n,fotos:e})},className:"absolute top-1 right-1 px-1 py-0.5 bg-red-600 hover:bg-red-500 text-white text-xs rounded",children:"\xd7"})]}),(0,a.jsx)("div",{className:"text-xs text-zinc-700 dark:text-zinc-400 text-center mb-1",children:e.etapa}),(0,a.jsx)("input",{type:"text",value:e.descricao,onChange:e=>{let t=[...n.fotos];t[r].descricao=e.target.value,d({...n,fotos:t})},className:"w-full bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-2 py-1 rounded border border-zinc-300 dark:border-zinc-700 text-sm",placeholder:"Descri\xe7\xe3o da foto..."})]},r))}),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"font-medium",children:["Fotos da Revitaliza\xe7\xe3o (",n.fotos.length,"/3)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:async e=>{let r=Array.from(e.target.files||[]),t=n.fotos,a=3-t.length;if(a<=0)return void c.oR.warning("Limite m\xe1ximo de 3 fotos atingido.");let o=r.slice(0,a).sort((e,r)=>{let t=e=>{let r=e.match(/(\d+)/);return r?parseInt(r[1]):0},a=t(e.name),o=t(r.name);return a>0&&o>0?a-o:e.name.localeCompare(r.name)});try{let e=o.map(e=>new Promise(r=>{p(e,r)})),s=await Promise.all(e),i=[...t];s.forEach((e,r)=>{let a=["ANTES","DURANTE","DEPOIS"][t.length+r]||"ANTES";i.push({url:e,etapa:a,descricao:"ANTES"===a?"Antes":"DURANTE"===a?"Durante":"Depois"})}),d({...n,fotos:i}),r.length>a?c.oR.warning("Apenas ".concat(a," fotos foram adicionadas. Limite m\xe1ximo de 3 fotos.")):c.oR.success("".concat(s.length," foto(s) adicionada(s) com sucesso!"))}catch(e){c.oR.error("Erro ao fazer upload das fotos.")}},className:"hidden",id:"multiple-photo-upload-revitalizacao",disabled:n.fotos.length>=3}),(0,a.jsxs)("label",{htmlFor:"multiple-photo-upload-revitalizacao",className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium cursor-pointer transition-all duration-200 shadow-lg ".concat(n.fotos.length>=3?"bg-zinc-500 text-zinc-300 cursor-not-allowed shadow-none":"bg-indigo-600 hover:bg-indigo-500 hover:shadow-indigo-500/25 text-white hover:scale-105"),children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Adicionar Foto"]})]})]})})]})]}),(0,a.jsxs)("div",{className:"pt-2 flex gap-3",children:[(0,a.jsxs)("button",{onClick:g,disabled:u,className:"px-6 py-3 rounded-lg text-white flex items-center gap-2 font-semibold transition-all duration-200 shadow-lg ".concat(u?"bg-green-400 cursor-not-allowed shadow-none":"bg-green-600 hover:bg-green-500 hover:shadow-green-500/25 hover:scale-105"),children:[u&&(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!u&&(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u?"Salvando...":"Salvar Altera\xe7\xf5es"]}),(0,a.jsxs)("button",{onClick:()=>window.location.href="/relatorios/".concat(t),className:"px-6 py-3 bg-zinc-600 hover:bg-zinc-500 hover:shadow-zinc-500/25 text-white rounded-lg font-semibold transition-all duration-200 shadow-lg hover:scale-105 flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancelar"]})]})]})}},6020:(e,r,t)=>{"use strict";t.d(r,{DZ:()=>s,ZU:()=>i,iU:()=>a,k4:()=>o,zb:()=>c});let a={SP:"S\xc3O PAULO",CV:"CASA VERDE / LIM\xc3O / CACHOEIRINHA",JT:"JA\xc7AN\xc3 / TREMEMB\xc9",MG:"VILA MARIA / VILA GUILHERME",ST:"SANTANA / TUCURUVI"},o={MUTIRAO:"Mutir\xe3o - SELIMP",REVITALIZACAO:"Revitaliza\xe7\xe3o de Pontos Viciados",ACUMULADOR:"A\xe7\xe3o de Acumulador",ALAGAMENTOS:"Limpeza P\xf3s Alagamento",ZELADORIA:"Zeladoria",DDS:"DDS",HIGIENIZACAO:"Higieniza\xe7\xe3o, manuten\xe7\xe3o, instala\xe7\xe3o, remo\xe7\xe3o e reposi\xe7\xe3o de Papeleiras",VARRICAO_MECANIZADA:"Varri\xe7\xe3o Mecanizada",FEIRAS:"Feiras",EVENTOS:"Eventos",ROTINEIROS:"Servi\xe7os Rotineiros"},s=["Acumulador","Alagamentos","Zeladoria"],i=["Capina\xe7\xe3o e Ro\xe7agem","Cata Bagulho","Coleta manual e transporte de materiais diversos/entulho","Coleta mecanizada e transporte de materiais diversos e de entulho","Grandes Objetos - Coleta e transporte de objetos volumosos","Higieniza\xe7\xe3o, manuten\xe7\xe3o, instala\xe7\xe3o, remo\xe7\xe3o e reposi\xe7\xe3o de Papeleiras","Lavagem Especial de Equipamentos P\xfablicos","Limpeza de Boca de Lobo","Mutir\xe3o","Raspagem da terra e areia nas sarjetas de vias p\xfablicas","Remo\xe7\xe3o de faixas e propagandas irregulares","Servi\xe7o de pintura de meio fio","Varri\xe7\xe3o Manual de Vias e Logradouros Publicos","Varri\xe7\xe3o Mecanizada","Desfazimento","Varri\xe7\xe3o de Pra\xe7a","Feiras","Ecopontos"],c={CV:["Ecoponto Vila Nova Cachoeirinha","Ecoponto Vila Santa Maria","Ecoponto Parque Peruche","Ecoponto Jardim Ant\xe1rtica","Ecoponto S\xe3o Leandro"],MG:["Ecoponto Vila Sabrina","Ecoponto Vila Guilherme","Ecoponto Vila Maria"],ST:["Ecoponto Santana","Ecoponto Tucuruvi"],JT:["Ecoponto Anselmo Machado","Ecoponto Silvio Bittencourt"]}}},e=>{e.O(0,[4744,3372,8441,1255,7358],()=>e(e.s=1130)),_N_E=e.O()}]);