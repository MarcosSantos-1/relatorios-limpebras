(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{3328:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>u});var t=r(5155),o=r(2115),i=r(3372),s=r(6020),n=r(9675),c=r(4389),d=r(4589),l=r(4744);function u(){let[e,a]=(0,o.useState)("Mutir\xe3o - SELIMP"),[r,u]=(0,o.useState)(null),[m,p]=(0,o.useState)("SP"),[x,h]=(0,o.useState)(""),[g,f]=(0,o.useState)(""),[b,v]=(0,o.useState)(""),[k,j]=(0,o.useState)(""),[z,N]=(0,o.useState)([{descricao:"Colaboradores (quant.)",quantidade:"",tipo:"quantidade"},{descricao:"Equipamentos (quant.)",quantidade:"",tipo:"quantidade"},{descricao:"Varri\xe7\xe3o (km)",quantidade:"",tipo:"decimal"},{descricao:"Pintura de guias (km)",quantidade:"",tipo:"decimal"},{descricao:"Capina\xe7\xe3o (km)",quantidade:"",tipo:"decimal"},{descricao:"Bocas de lobo e bueiros limpos (unid)",quantidade:"",tipo:"quantidade"},{descricao:"Lixeiras instaladas/repostas (unid)",quantidade:"",tipo:"quantidade"},{descricao:"Lixeiras higienizadas (unid)",quantidade:"",tipo:"quantidade"},{descricao:"\xc1gua utilizada (m3)",quantidade:"",tipo:"decimal"},{descricao:"Remo\xe7\xe3o de faixas e propagandas (unid)",quantidade:"",tipo:"quantidade"},{descricao:"Volume de res\xedduos coletados (Ton.)* Estimativa",quantidade:"",tipo:"decimal"}]),[w,y]=(0,o.useState)([{ordem:1,descricao:""}]),[A,E]=(0,o.useState)([]),[S,C]=(0,o.useState)({});function L(e,a,r){C(t=>({...t,[e]:{...t[e],[a]:r}}))}function D(e,a){(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return new Promise((t,o)=>{let i=document.createElement("canvas"),s=i.getContext("2d"),n=new Image;n.onload=()=>{try{let{width:o,height:c}=n;o>a&&(c=c*a/o,o=a),c>600&&(o=600*o/c,c=600),i.width=o,i.height=c,s&&s.drawImage(n,0,0,o,c);let d=i.toDataURL("image/jpeg",r);console.log("\uD83D\uDCF8 Imagem comprimida: ".concat(e.size," bytes → ").concat(d.length," bytes")),console.log("\uD83D\uDCF8 URL gerada: ".concat(d.substring(0,100),"...")),t(d)}catch(e){console.error("Erro ao comprimir imagem:",e),o(e)}},n.onerror=e=>{console.error("Erro ao carregar imagem para compress\xe3o:",e),o(e)},n.src=URL.createObjectURL(e)})})(e,800,.8).then(a).catch(e=>{console.error("Erro no upload da imagem:",e),l.oR.error("Erro ao processar imagem. Tente novamente.")})}async function M(){if(!r)return void l.oR.error("Por favor, selecione a data do mutir\xe3o.");let a=Date.now(),t=(0,n.A)(),o=A.map(e=>{var a,r,t;return{assunto:e,fotos:[...(null==(a=S[e])?void 0:a.antes)?[{url:S[e].antes,etapa:"ANTES",descricao:"Antes"}]:[],...(null==(r=S[e])?void 0:r.durante)?[{url:S[e].durante,etapa:"DURANTE",descricao:"Durante"}]:[],...(null==(t=S[e])?void 0:t.depois)?[{url:S[e].depois,etapa:"DEPOIS",descricao:"Depois"}]:[]]}});console.log("Servi\xe7os selecionados:",A),console.log("Fotos dos servi\xe7os:",S),console.log("Servi\xe7os processados:",o);let s=r.toISOString().split("T")[0],c={id:t,tipoServico:"MUTIRAO",title:e||"Mutir\xe3o - SELIMP",data:s,quantitativo:z,secoes:[{sub:m,local:x,descricao:g,data:s,equipeFotoUrl:b,mapaFotoUrl:k,informacoes:w,servicos:o}],createdAt:a,updatedAt:a};console.log("Relat\xf3rio a ser salvo:",c);try{await (0,i.wt)(c),l.oR.success("Relat\xf3rio salvo com sucesso!"),window.location.href="/relatorios"}catch(e){console.error("Erro ao salvar relat\xf3rio:",e),l.oR.error("Erro ao salvar. Tentando limpar relat\xf3rios antigos..."),await (0,i.gI)();try{await (0,i.wt)(c),l.oR.success("Relat\xf3rio salvo com sucesso!"),window.location.href="/relatorios"}catch(e){l.oR.error("Erro persistente. Por favor, tente novamente com menos fotos."),console.error("Erro persistente:",e)}}}return(0,t.jsx)(d.K,{requiredRole:"admin",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl p-6 text-white shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,t.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"\uD83C\uDFD7️ Novo Relat\xf3rio de Mutir\xe3o"}),(0,t.jsx)("p",{className:"text-green-100",children:"Registre as atividades de limpeza e manuten\xe7\xe3o urbana"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:"Tipo de Servi\xe7o"}),(0,t.jsx)("select",{value:e,disabled:!0,className:"bg-zinc-700 text-zinc-300 px-3 py-2 rounded border border-zinc-600 cursor-not-allowed font-semibold",children:(0,t.jsx)("option",{value:"Mutir\xe3o - SELIMP",children:"Mutir\xe3o - SELIMP"})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Data"}),(0,t.jsx)(c.A,{selectedDate:r,onChange:u,placeholder:"Selecione a data do mutir\xe3o"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Sub-regi\xe3o"}),(0,t.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md",children:[(0,t.jsx)("option",{value:"SP",children:s.iU.SP}),(0,t.jsx)("option",{value:"CV",children:s.iU.CV}),(0,t.jsx)("option",{value:"JT",children:s.iU.JT}),(0,t.jsx)("option",{value:"MG",children:s.iU.MG}),(0,t.jsx)("option",{value:"ST",children:s.iU.ST})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Local / Evento"}),(0,t.jsx)("input",{value:x,onChange:e=>h(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Descri\xe7\xe3o do Mutir\xe3o (sub)"}),(0,t.jsx)("textarea",{value:g,onChange:e=>f(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 min-h-24 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"})]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Fotos (opcional)"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Foto da Equipe"}),(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];r&&D(r,v)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",id:"equipe-foto"}),(0,t.jsx)("label",{htmlFor:"equipe-foto",className:"flex flex-col items-center justify-center w-48 h-32 border-2 border-dashed border-zinc-300 dark:border-zinc-600 rounded-lg cursor-pointer bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-750 hover:border-indigo-500 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,t.jsx)("svg",{className:"w-8 h-8 mb-2 text-zinc-500 dark:text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsxs)("p",{className:"text-xs text-zinc-600 dark:text-zinc-400 text-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Clique para adicionar"}),(0,t.jsx)("br",{}),"foto da equipe"]})]})})]}),b&&(0,t.jsx)("div",{className:"w-20 h-20 border border-zinc-300 dark:border-zinc-600 rounded overflow-hidden",children:(0,t.jsx)("img",{src:b,alt:"Foto da equipe",className:"w-full h-full object-cover"})})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Foto do Mapa"}),(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];r&&D(r,j)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",id:"mapa-foto"}),(0,t.jsx)("label",{htmlFor:"mapa-foto",className:"flex flex-col items-center justify-center w-48 h-32 border-2 border-dashed border-zinc-300 dark:border-zinc-600 rounded-lg cursor-pointer bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-750 hover:border-indigo-500 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,t.jsx)("svg",{className:"w-8 h-8 mb-2 text-zinc-500 dark:text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsxs)("p",{className:"text-xs text-zinc-600 dark:text-zinc-400 text-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Clique para adicionar"}),(0,t.jsx)("br",{}),"foto do mapa"]})]})})]}),k&&(0,t.jsx)("div",{className:"w-20 h-20 border border-zinc-300 dark:border-zinc-600 rounded overflow-hidden",children:(0,t.jsx)("img",{src:k,alt:"Foto do mapa",className:"w-full h-full object-cover"})})]})]})]})]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Quantitativo estimado (capa)"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:z.map((e,a)=>{let r="decimal"===e.tipo,o=e.descricao.includes("Colaboradores")||e.descricao.includes("Varri\xe7\xe3o")||e.descricao.includes("Bocas de lobo")||e.descricao.includes("Volume de res\xedduos");return(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("div",{className:"text-sm w-2/3 font-semibold ".concat(o?"text-purple-800 dark:text-purple-300":"text-zinc-900 dark:text-zinc-300"),children:e.descricao}),(0,t.jsx)("input",{value:e.quantidade,onChange:r=>{let t=function(e,a){if(!e)return"";let r=e.replace(/[^\d,.-]/g,"");if("quantidade"===a)return r.replace(/[^\d]/g,"");{let e=r.split(/[,.]/);return e.length>2?e[0]+","+e.slice(1).join(""):r.replace(".",",")}}(r.target.value,e.tipo);N(e=>{let r=[...e];return r[a]={...r[a],quantidade:t},r})},onBlur:r=>{let t=function(e,a){if(!e||""===e.trim())return"";if("decimal"===a){if(!e.includes(",")&&!e.includes("."))return e+",00";if(e.includes(",")&&""===e.split(",")[1])return e+"00";if(e.includes(",")&&1===e.split(",")[1].length)return e+"0"}return e}(r.target.value,e.tipo);t!==r.target.value&&N(e=>{let r=[...e];return r[a]={...r[a],quantidade:t},r})},className:"px-3 py-2 rounded border w-1/3 font-semibold transition-all duration-200 ".concat(o?"bg-purple-200 dark:bg-purple-900/30 text-purple-900 dark:text-purple-100 border-purple-300 dark:border-purple-600 focus:border-purple-500 dark:focus:border-purple-500 focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-700 focus:shadow-md":"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 border-zinc-300 dark:border-zinc-700 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"),placeholder:r?"0,0":"0",type:"text",inputMode:r?"decimal":"numeric"})]},a)})})]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"font-medium",children:"INFORMA\xc7\xd5ES (sub)"}),(0,t.jsx)("div",{className:"space-y-2",children:w.map((e,a)=>{let r=s.ZU.includes(e.descricao);return(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("span",{className:"w-10 text-zinc-400",children:[e.ordem,"."]}),(0,t.jsx)("input",{value:e.descricao,onChange:e=>{let r=e.target.value;y(e=>{let t=[...e];return t[a]={...t[a],descricao:r},t})},disabled:r,className:"flex-1 px-3 py-2 rounded border font-semibold transition-all duration-200 ".concat(r?"bg-zinc-100 dark:bg-zinc-700 text-zinc-500 dark:text-zinc-400 border-zinc-200 dark:border-zinc-600 cursor-not-allowed":"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 border-zinc-300 dark:border-zinc-700 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"),placeholder:r?"Preenchido automaticamente":"Descri\xe7\xe3o do item"}),r&&(0,t.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 flex items-center",children:"\uD83E\uDD16 Auto"})]},a)})})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Servi\xe7os Executados"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.ZU.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:A.includes(e),onChange:()=>{E(a=>{if(!a.includes(e))return C(a=>({...a,[e]:{antes:"",durante:"",depois:""}})),y(a=>{if(a.some(a=>a.descricao===e))return a;if(1===a.length&&""===a[0].descricao)return[{ordem:1,descricao:e}];{let r=[...a];return r.push({ordem:r.length+1,descricao:e}),r}}),[...a,e];{let r={...S};return delete r[e],C(r),y(a=>a.filter(a=>a.descricao!==e)),a.filter(a=>a!==e)}})},className:"w-4 h-4 text-indigo-600 bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600 rounded focus:ring-indigo-500"}),(0,t.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:e})]},e))})]}),A.length>0&&(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Fotos dos Servi\xe7os"}),A.map(e=>(0,t.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 rounded p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"font-medium text-zinc-200",children:e}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:a=>{let r=a.target.files;r&&r.length>0&&function(e,a){let r=Array.from(e);3===r.length?r.forEach((e,r)=>{let t=["antes","durante","depois"];D(e,e=>L(a,t[r],e))}):2===r.length?r.forEach((e,r)=>{let t=["antes","depois"];D(e,e=>L(a,t[r],e))}):1===r.length&&D(r[0],e=>L(a,"antes",e))}(r,e)},className:"hidden",id:"multiple-".concat(e)}),(0,t.jsx)("label",{htmlFor:"multiple-".concat(e),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1 rounded text-xs cursor-pointer transition-colors",children:"\uD83D\uDCF8 Upload m\xfaltiplo"})]})]}),(0,t.jsx)("div",{className:"text-xs text-zinc-400 mb-2",children:'\uD83D\uDCA1 Dica: Use "Upload m\xfaltiplo" para adicionar 1, 2 ou 3 fotos de uma vez (antes/durante/depois)'}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["antes","durante","depois"].map(a=>{var r;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs text-zinc-600 dark:text-zinc-400 capitalize font-medium",children:a}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:r=>{var t;let o=null==(t=r.target.files)?void 0:t[0];o&&D(o,r=>L(e,a,r))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",id:"".concat(e,"-").concat(a)}),(0,t.jsx)("label",{htmlFor:"".concat(e,"-").concat(a),className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-zinc-600 rounded-lg cursor-pointer bg-zinc-800 hover:bg-zinc-750 hover:border-indigo-500 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,t.jsx)("svg",{className:"w-8 h-8 mb-2 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsxs)("p",{className:"text-xs text-zinc-400 text-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Clique para adicionar"}),(0,t.jsx)("br",{}),"foto da etapa ",a]})]})})]}),(null==(r=S[e])?void 0:r[a])&&(0,t.jsx)("div",{className:"w-full h-32 border border-zinc-600 rounded overflow-hidden mt-2",children:(0,t.jsx)("img",{src:S[e][a],alt:"".concat(e," - ").concat(a),className:"w-full h-full object-cover"})})]},a)})})]},e))]}),(0,t.jsxs)("div",{className:"pt-2 flex gap-3",children:[(0,t.jsxs)("button",{onClick:M,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"\uD83D\uDCBE Salvar"]}),(0,t.jsx)("button",{onClick:()=>window.history.back(),className:"bg-zinc-600 hover:bg-zinc-500 text-white px-4 py-2 rounded",children:"Voltar"})]})]})})}},4389:(e,a,r)=>{"use strict";r.d(a,{A:()=>c});var t=r(5155),o=r(8661),i=r.n(o),s=r(2115),n=r(740);function c(e){let{selectedDate:a,onChange:r,placeholder:o="Selecione uma data",className:c=""}=e,[d,l]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"jsx-e84ae2c801487fae "+"relative ".concat(c),children:[(0,t.jsx)(n.Ay,{selected:a,onChange:e=>{r(e),l(!1)},onCalendarOpen:()=>l(!0),onCalendarClose:()=>l(!1),open:d,placeholderText:o,dateFormat:"dd/MM/yyyy",showPopperArrow:!1,popperClassName:"custom-datepicker-popper",className:"w-full px-3 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 font-semibold transition-all duration-200 focus:border-indigo-500 dark:focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:focus:ring-indigo-700 focus:shadow-md cursor-pointer",calendarClassName:"custom-datepicker-calendar",dayClassName:e=>{let r=new Date,t=e.toDateString()===r.toDateString(),o=a&&e.toDateString()===a.toDateString(),i="hover:bg-indigo-100 dark:hover:bg-indigo-900 rounded-lg transition-colors duration-200";return t&&(i+=" bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 font-semibold"),o&&(i+=" bg-indigo-500 text-white font-bold"),i},renderCustomHeader:e=>{let{date:a,decreaseMonth:r,increaseMonth:o,prevMonthButtonDisabled:i,nextMonthButtonDisabled:s}=e;return(0,t.jsxs)("div",{className:"jsx-e84ae2c801487fae flex items-center justify-between p-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-t-lg",children:[(0,t.jsx)("button",{onClick:r,disabled:i,className:"jsx-e84ae2c801487fae p-2 rounded-lg hover:bg-white/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-e84ae2c801487fae w-4 h-4",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",className:"jsx-e84ae2c801487fae"})})}),(0,t.jsx)("div",{className:"jsx-e84ae2c801487fae text-lg font-bold",children:a.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),(0,t.jsx)("button",{onClick:o,disabled:s,className:"jsx-e84ae2c801487fae p-2 rounded-lg hover:bg-white/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-e84ae2c801487fae w-4 h-4",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:"jsx-e84ae2c801487fae"})})})]})}}),(0,t.jsx)(i(),{id:"e84ae2c801487fae",children:".custom-datepicker-popper{z-index:9999!important}.custom-datepicker-calendar{border:none!important;border-radius:.75rem!important;box-shadow:0 10px 25px rgba(0,0,0,.15)!important;overflow:hidden!important}.react-datepicker{border:none!important;font-family:inherit!important}.react-datepicker__header{background:transparent!important;border:none!important;padding:0!important}.react-datepicker__month-container{background:white!important}.dark .react-datepicker__month-container{background:#1f2937!important}.react-datepicker__day-names{background:#f8fafc!important;padding:.5rem 0!important}.dark .react-datepicker__day-names{background:#374151!important}.react-datepicker__day-name{color:#6b7280!important;font-weight:600!important;font-size:.875rem!important}.dark .react-datepicker__day-name{color:#9ca3af!important}.react-datepicker__day{color:#374151!important;font-weight:500!important;border-radius:.5rem!important;margin:.125rem!important;width:2rem!important;height:2rem!important;line-height:2rem!important;transition:all.2s ease!important}.dark .react-datepicker__day{color:#d1d5db!important}.react-datepicker__day:hover{background-color:#e0e7ff!important;color:#3730a3!important}.dark .react-datepicker__day:hover{background-color:#4338ca!important;color:#fff!important}.react-datepicker__day--selected{background-color:#6366f1!important;color:#fff!important;font-weight:700!important}.react-datepicker__day--today{background-color:#dbeafe!important;color:#1e40af!important;font-weight:600!important}.dark .react-datepicker__day--today{background-color:#1e3a8a!important;color:#dbeafe!important}.react-datepicker__day--outside-month{color:#9ca3af!important}.dark .react-datepicker__day--outside-month{color:#6b7280!important}.react-datepicker__day--disabled{color:#d1d5db!important;cursor:not-allowed!important}.dark .react-datepicker__day--disabled{color:#4b5563!important}"})]})}r(9157)},4589:(e,a,r)=>{"use strict";r.d(a,{K:()=>n});var t=r(5155),o=r(8209),i=r(63),s=r(2115);function n(e){let{children:a,requiredRole:r="user",fallbackPath:n="/relatorios"}=e,{isAuthenticated:c,isAdmin:d,isLoading:l}=(0,o.A)(),u=(0,i.useRouter)();if((0,s.useEffect)(()=>{if(!l&&c){let e=!1;switch(r){case"host":case"admin":e=d;break;case"user":e=!0}e||u.push(n)}},[c,d,l,r,n,u]),l)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Verificando permiss\xf5es..."})]})});if(!c)return null;let m=!1;switch(r){case"host":case"admin":m=d;break;case"user":m=!0}return m?(0,t.jsx)(t.Fragment,{children:a}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center bg-white dark:bg-slate-800 p-8 rounded-xl shadow-lg",children:[(0,t.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\uD83D\uDEAB"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acesso Negado"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina."}),(0,t.jsx)("button",{onClick:()=>u.push(n),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200",children:"Voltar ao In\xedcio"})]})})}},6020:(e,a,r)=>{"use strict";r.d(a,{DZ:()=>i,ZU:()=>s,iU:()=>t,k4:()=>o,zb:()=>n});let t={SP:"S\xc3O PAULO",CV:"CASA VERDE / LIM\xc3O / CACHOEIRINHA",JT:"JA\xc7AN\xc3 / TREMEMB\xc9",MG:"VILA MARIA / VILA GUILHERME",ST:"SANTANA / TUCURUVI"},o={MUTIRAO:"Mutir\xe3o - SELIMP",REVITALIZACAO:"Revitaliza\xe7\xe3o de Pontos Viciados",ACUMULADOR:"A\xe7\xe3o de Acumulador",ALAGAMENTOS:"Limpeza P\xf3s Alagamento",ZELADORIA:"Zeladoria",DDS:"DDS",HIGIENIZACAO:"Higieniza\xe7\xe3o, manuten\xe7\xe3o, instala\xe7\xe3o, remo\xe7\xe3o e reposi\xe7\xe3o de Papeleiras",VARRICAO_MECANIZADA:"Varri\xe7\xe3o Mecanizada",FEIRAS:"Feiras",EVENTOS:"Eventos",ROTINEIROS:"Servi\xe7os Rotineiros"},i=["Acumulador","Alagamentos","Zeladoria"],s=["Capina\xe7\xe3o e Ro\xe7agem","Cata Bagulho","Coleta manual e transporte de materiais diversos/entulho","Coleta mecanizada e transporte de materiais diversos e de entulho","Grandes Objetos - Coleta e transporte de objetos volumosos","Higieniza\xe7\xe3o, manuten\xe7\xe3o, instala\xe7\xe3o, remo\xe7\xe3o e reposi\xe7\xe3o de Papeleiras","Lavagem Especial de Equipamentos P\xfablicos","Limpeza de Boca de Lobo","Mutir\xe3o","Raspagem da terra e areia nas sarjetas de vias p\xfablicas","Remo\xe7\xe3o de faixas e propagandas irregulares","Servi\xe7o de pintura de meio fio","Varri\xe7\xe3o Manual de Vias e Logradouros Publicos","Varri\xe7\xe3o Mecanizada","Desfazimento","Varri\xe7\xe3o de Pra\xe7a","Feiras","Ecopontos"],n={CV:["Ecoponto Vila Nova Cachoeirinha","Ecoponto Vila Santa Maria","Ecoponto Parque Peruche","Ecoponto Jardim Ant\xe1rtica","Ecoponto S\xe3o Leandro"],MG:["Ecoponto Vila Sabrina","Ecoponto Vila Guilherme","Ecoponto Vila Maria"],ST:["Ecoponto Santana","Ecoponto Tucuruvi"],JT:["Ecoponto Anselmo Machado","Ecoponto Silvio Bittencourt"]}},8209:(e,a,r)=>{"use strict";r.d(a,{A:()=>s,Y:()=>n});var t=r(2115),o=r(3361);let i={"marcos.silva":"marcos.silva@limpebras.com",admin:"admin@test.com","admin@test.com":"admin@test.com",usuario1:"usuario1@limpebras.com",usuario2:"usuario2@limpebras.com"};function s(){let[e,a]=(0,t.useState)({isAuthenticated:!1,user:null,isLoading:!0,login:async()=>!1,logout:()=>{},isAdmin:!1});(0,t.useEffect)(()=>{localStorage.getItem("auth_token")?(o.y1.initToken(),o.y1.getProfile().then(e=>{a(a=>({...a,isAuthenticated:!0,user:{id:e.id,nome:e.nome,email:e.email,username:e.email.split("@")[0],role:e.role,created_at:e.created_at},isLoading:!1,isAdmin:"admin"===e.role}))}).catch(e=>{console.error("Token inv\xe1lido:",e),localStorage.removeItem("auth_token"),a(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))})):a(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))},[]);let r=async(e,r)=>{try{let t=i[e]||e,s=await o.y1.login(t,r);if(s.token&&s.user)return a(a=>({...a,isAuthenticated:!0,user:{id:s.user.id,nome:s.user.nome,email:s.user.email,username:e,role:s.user.role},isLoading:!1,isAdmin:"admin"===s.user.role})),console.log("Login successful, user authenticated:",s.user),!0;return console.log("Login failed - invalid response"),!1}catch(e){return console.error("Erro no login:",e),!1}};return{...e,login:r,logout:()=>{o.y1.logout(),a(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))},isAdmin:e.isAdmin}}function n(){let[e,a]=(0,t.useState)([]),[r,i]=(0,t.useState)(!1),s=async()=>{try{i(!0),a([])}catch(e){console.error("Erro ao carregar usu\xe1rios:",e)}finally{i(!1)}};return(0,t.useEffect)(()=>{s()},[]),{users:e,loading:r,addUser:async e=>{try{let a=await o.y1.register(e);return await s(),a.user}catch(e){throw console.error("Erro ao adicionar usu\xe1rio:",e),e}},updateUser:async(e,a)=>{try{await o.y1.updateProfile(a),await s()}catch(e){throw console.error("Erro ao atualizar usu\xe1rio:",e),e}},deleteUser:async e=>{try{await s()}catch(e){throw console.error("Erro ao deletar usu\xe1rio:",e),e}},toggleUserStatus:async e=>{try{await s()}catch(e){throw console.error("Erro ao alterar status do usu\xe1rio:",e),e}},refreshUsers:s}}},9081:(e,a,r)=>{Promise.resolve().then(r.bind(r,3328))}},e=>{e.O(0,[3038,5579,4020,4744,1061,9399,3372,8441,1255,7358],()=>e(e.s=9081)),_N_E=e.O()}]);