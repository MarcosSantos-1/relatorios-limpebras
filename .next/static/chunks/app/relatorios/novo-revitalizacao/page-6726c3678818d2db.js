(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5891],{3220:(e,a,r)=>{Promise.resolve().then(r.bind(r,6451))},4389:(e,a,r)=>{"use strict";r.d(a,{A:()=>c});var t=r(5155),o=r(8661),i=r.n(o),n=r(2115),s=r(740);function c(e){let{selectedDate:a,onChange:r,placeholder:o="Selecione uma data",className:c=""}=e,[l,d]=(0,n.useState)(!1);return(0,t.jsxs)("div",{className:"jsx-e84ae2c801487fae "+"relative ".concat(c),children:[(0,t.jsx)(s.Ay,{selected:a,onChange:e=>{r(e),d(!1)},onCalendarOpen:()=>d(!0),onCalendarClose:()=>d(!1),open:l,placeholderText:o,dateFormat:"dd/MM/yyyy",showPopperArrow:!1,popperClassName:"custom-datepicker-popper",className:"w-full px-3 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 font-semibold transition-all duration-200 focus:border-indigo-500 dark:focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:focus:ring-indigo-700 focus:shadow-md cursor-pointer",calendarClassName:"custom-datepicker-calendar",dayClassName:e=>{let r=new Date,t=e.toDateString()===r.toDateString(),o=a&&e.toDateString()===a.toDateString(),i="hover:bg-indigo-100 dark:hover:bg-indigo-900 rounded-lg transition-colors duration-200";return t&&(i+=" bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 font-semibold"),o&&(i+=" bg-indigo-500 text-white font-bold"),i},renderCustomHeader:e=>{let{date:a,decreaseMonth:r,increaseMonth:o,prevMonthButtonDisabled:i,nextMonthButtonDisabled:n}=e;return(0,t.jsxs)("div",{className:"jsx-e84ae2c801487fae flex items-center justify-between p-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-t-lg",children:[(0,t.jsx)("button",{onClick:r,disabled:i,className:"jsx-e84ae2c801487fae p-2 rounded-lg hover:bg-white/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-e84ae2c801487fae w-4 h-4",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",className:"jsx-e84ae2c801487fae"})})}),(0,t.jsx)("div",{className:"jsx-e84ae2c801487fae text-lg font-bold",children:a.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),(0,t.jsx)("button",{onClick:o,disabled:n,className:"jsx-e84ae2c801487fae p-2 rounded-lg hover:bg-white/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-e84ae2c801487fae w-4 h-4",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:"jsx-e84ae2c801487fae"})})})]})}}),(0,t.jsx)(i(),{id:"e84ae2c801487fae",children:".custom-datepicker-popper{z-index:9999!important}.custom-datepicker-calendar{border:none!important;border-radius:.75rem!important;box-shadow:0 10px 25px rgba(0,0,0,.15)!important;overflow:hidden!important}.react-datepicker{border:none!important;font-family:inherit!important}.react-datepicker__header{background:transparent!important;border:none!important;padding:0!important}.react-datepicker__month-container{background:white!important}.dark .react-datepicker__month-container{background:#1f2937!important}.react-datepicker__day-names{background:#f8fafc!important;padding:.5rem 0!important}.dark .react-datepicker__day-names{background:#374151!important}.react-datepicker__day-name{color:#6b7280!important;font-weight:600!important;font-size:.875rem!important}.dark .react-datepicker__day-name{color:#9ca3af!important}.react-datepicker__day{color:#374151!important;font-weight:500!important;border-radius:.5rem!important;margin:.125rem!important;width:2rem!important;height:2rem!important;line-height:2rem!important;transition:all.2s ease!important}.dark .react-datepicker__day{color:#d1d5db!important}.react-datepicker__day:hover{background-color:#e0e7ff!important;color:#3730a3!important}.dark .react-datepicker__day:hover{background-color:#4338ca!important;color:#fff!important}.react-datepicker__day--selected{background-color:#6366f1!important;color:#fff!important;font-weight:700!important}.react-datepicker__day--today{background-color:#dbeafe!important;color:#1e40af!important;font-weight:600!important}.dark .react-datepicker__day--today{background-color:#1e3a8a!important;color:#dbeafe!important}.react-datepicker__day--outside-month{color:#9ca3af!important}.dark .react-datepicker__day--outside-month{color:#6b7280!important}.react-datepicker__day--disabled{color:#d1d5db!important;cursor:not-allowed!important}.dark .react-datepicker__day--disabled{color:#4b5563!important}"})]})}r(9157)},4589:(e,a,r)=>{"use strict";r.d(a,{K:()=>s});var t=r(5155),o=r(8209),i=r(63),n=r(2115);function s(e){let{children:a,requiredRole:r="user",fallbackPath:s="/relatorios"}=e,{isAuthenticated:c,isAdmin:l,isLoading:d}=(0,o.A)(),u=(0,i.useRouter)();if((0,n.useEffect)(()=>{if(!d&&c){let e=!1;switch(r){case"host":case"admin":e=l;break;case"user":e=!0}e||u.push(s)}},[c,l,d,r,s,u]),d)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Verificando permiss\xf5es..."})]})});if(!c)return null;let m=!1;switch(r){case"host":case"admin":m=l;break;case"user":m=!0}return m?(0,t.jsx)(t.Fragment,{children:a}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center bg-white dark:bg-slate-800 p-8 rounded-xl shadow-lg",children:[(0,t.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\uD83D\uDEAB"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acesso Negado"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina."}),(0,t.jsx)("button",{onClick:()=>u.push(s),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200",children:"Voltar ao In\xedcio"})]})})}},6020:(e,a,r)=>{"use strict";r.d(a,{DZ:()=>i,ZU:()=>n,iU:()=>t,k4:()=>o,zb:()=>s});let t={SP:"S\xc3O PAULO",CV:"CASA VERDE / LIM\xc3O / CACHOEIRINHA",JT:"JA\xc7AN\xc3 / TREMEMB\xc9",MG:"VILA MARIA / VILA GUILHERME",ST:"SANTANA / TUCURUVI"},o={MUTIRAO:"Mutir\xe3o - SELIMP",REVITALIZACAO:"Revitaliza\xe7\xe3o de Pontos Viciados",ACUMULADOR:"A\xe7\xe3o de Acumulador",ALAGAMENTOS:"Limpeza P\xf3s Alagamento",ZELADORIA:"Zeladoria",DDS:"DDS",HIGIENIZACAO:"Higieniza\xe7\xe3o, manuten\xe7\xe3o, instala\xe7\xe3o, remo\xe7\xe3o e reposi\xe7\xe3o de Papeleiras",VARRICAO_MECANIZADA:"Varri\xe7\xe3o Mecanizada",FEIRAS:"Feiras",EVENTOS:"Eventos",ROTINEIROS:"Servi\xe7os Rotineiros"},i=["Acumulador","Alagamentos","Zeladoria"],n=["Capina\xe7\xe3o e Ro\xe7agem","Cata Bagulho","Coleta manual e transporte de materiais diversos/entulho","Coleta mecanizada e transporte de materiais diversos e de entulho","Grandes Objetos - Coleta e transporte de objetos volumosos","Higieniza\xe7\xe3o, manuten\xe7\xe3o, instala\xe7\xe3o, remo\xe7\xe3o e reposi\xe7\xe3o de Papeleiras","Lavagem Especial de Equipamentos P\xfablicos","Limpeza de Boca de Lobo","Mutir\xe3o","Raspagem da terra e areia nas sarjetas de vias p\xfablicas","Remo\xe7\xe3o de faixas e propagandas irregulares","Servi\xe7o de pintura de meio fio","Varri\xe7\xe3o Manual de Vias e Logradouros Publicos","Varri\xe7\xe3o Mecanizada","Desfazimento","Varri\xe7\xe3o de Pra\xe7a","Feiras","Ecopontos"],s={CV:["Ecoponto Vila Nova Cachoeirinha","Ecoponto Vila Santa Maria","Ecoponto Parque Peruche","Ecoponto Jardim Ant\xe1rtica","Ecoponto S\xe3o Leandro"],MG:["Ecoponto Vila Sabrina","Ecoponto Vila Guilherme","Ecoponto Vila Maria"],ST:["Ecoponto Santana","Ecoponto Tucuruvi"],JT:["Ecoponto Anselmo Machado","Ecoponto Silvio Bittencourt"]}},6451:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>u});var t=r(5155),o=r(2115),i=r(3372),n=r(6020),s=r(9675),c=r(4389),l=r(4589),d=r(4744);function u(){let[e,a]=(0,o.useState)("Revitaliza\xe7\xe3o de Pontos Viciados"),[r,u]=(0,o.useState)(null),[m,p]=(0,o.useState)("SP"),[x,h]=(0,o.useState)(""),[g,b]=(0,o.useState)(""),[f,k]=(0,o.useState)(""),[v,z]=(0,o.useState)(""),[j,N]=(0,o.useState)({antes:"",durante:"",depois:""});function w(e,a){(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.7;return new Promise(t=>{let o=document.createElement("canvas"),i=o.getContext("2d"),n=new Image;n.onload=()=>{let{width:e,height:s}=n;e>a&&(s=s*a/e,e=a),o.width=e,o.height=s,null==i||i.drawImage(n,0,0,e,s),t(o.toDataURL("image/jpeg",r))},n.src=URL.createObjectURL(e)})})(e,800,.8).then(a)}function y(e,a){N(r=>({...r,[e]:a}))}async function A(){if(!r)return void d.oR.error("Por favor, selecione a data da revitaliza\xe7\xe3o.");let a=Date.now(),t=(0,s.A)(),o=[...j.antes?[{url:j.antes,etapa:"ANTES",descricao:"Antes"}]:[],...j.durante?[{url:j.durante,etapa:"DURANTE",descricao:"Durante"}]:[],...j.depois?[{url:j.depois,etapa:"DEPOIS",descricao:"Depois"}]:[]],n={id:t,tipoServico:"REVITALIZACAO",assunto:e,data:r.toISOString().split("T")[0],sub:m,local:x,peso:v,frequencia:f,fotos:o,createdAt:a,updatedAt:a};try{await (0,i.wt)(n),d.oR.success("Relat\xf3rio salvo com sucesso!"),window.location.href="/relatorios"}catch(e){console.error("Erro ao salvar relat\xf3rio:",e),d.oR.error("Erro ao salvar. Tentando limpar relat\xf3rios antigos..."),await (0,i.gI)();try{await (0,i.wt)(n),d.oR.success("Relat\xf3rio salvo com sucesso!"),window.location.href="/relatorios"}catch(e){d.oR.error("Erro persistente. Por favor, tente novamente com menos fotos."),console.error("Erro persistente:",e)}}}return(0,t.jsx)(l.K,{requiredRole:"admin",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl p-6 text-white shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,t.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"\uD83C\uDF31 Nova Revitaliza\xe7\xe3o de Pontos Viciados"}),(0,t.jsx)("p",{className:"text-purple-100",children:"Registre a\xe7\xf5es de revitaliza\xe7\xe3o e transforma\xe7\xe3o urbana"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Assunto"}),(0,t.jsx)("input",{value:e,disabled:!0,className:"bg-zinc-200 dark:bg-zinc-700 text-zinc-900 dark:text-zinc-300 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-600 cursor-not-allowed font-semibold"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Data"}),(0,t.jsx)(c.A,{selectedDate:r,onChange:u,placeholder:"Selecione a data da revitaliza\xe7\xe3o"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Sub-regi\xe3o"}),(0,t.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md",children:[(0,t.jsx)("option",{value:"SP",children:n.iU.SP}),(0,t.jsx)("option",{value:"CV",children:n.iU.CV}),(0,t.jsx)("option",{value:"JT",children:n.iU.JT}),(0,t.jsx)("option",{value:"MG",children:n.iU.MG}),(0,t.jsx)("option",{value:"ST",children:n.iU.ST})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Local / Endere\xe7o"}),(0,t.jsx)("input",{value:x,onChange:e=>h(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Frequ\xeancia"}),(0,t.jsxs)("select",{value:f,onChange:e=>k(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md",children:[(0,t.jsx)("option",{value:"",children:"Selecione a frequ\xeancia"}),(0,t.jsx)("option",{value:"Bissemanal",children:"Bissemanal"}),(0,t.jsx)("option",{value:"Semanal",children:"Semanal"}),(0,t.jsx)("option",{value:"Di\xe1rio",children:"Di\xe1rio"}),(0,t.jsx)("option",{value:"Alternado",children:"Alternado"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Peso"}),(0,t.jsx)("input",{value:v,onChange:e=>{z(function(e){let a=e.replace(/\D/g,"");if(!a)return"";let r=parseInt(a).toLocaleString("pt-BR");return"".concat(r," kg")}(e.target.value.replace(/[^\d]/g,"")))},className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md",placeholder:"Digite apenas n\xfameros (ex: 1000)"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Peso"}),(0,t.jsx)("input",{type:"text",value:v,onChange:e=>z(e.target.value),placeholder:"Ex: 2.5kg",className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Frequ\xeancia"}),(0,t.jsx)("input",{type:"text",value:f,onChange:e=>k(e.target.value),placeholder:"Ex: Di\xe1ria, Semanal, Mensal",className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Fotos da Revitaliza\xe7\xe3o"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let a=e.target.files;a&&a.length>0&&function(e){let a=Array.from(e);3===a.length?a.forEach((e,a)=>{let r=["antes","durante","depois"];w(e,e=>y(r[a],e))}):2===a.length?a.forEach((e,a)=>{let r=["antes","depois"];w(e,e=>y(r[a],e))}):1===a.length&&w(a[0],e=>y("antes",e))}(a)},className:"hidden",id:"multiple-revitalizacao"}),(0,t.jsx)("label",{htmlFor:"multiple-revitalizacao",className:"bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1 rounded text-xs cursor-pointer transition-colors",children:"\uD83D\uDCF8 Upload m\xfaltiplo"})]})]}),(0,t.jsx)("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 mb-2",children:'\uD83D\uDCA1 Dica: Use "Upload m\xfaltiplo" para adicionar 1, 2 ou 3 fotos de uma vez (antes/durante/depois)'}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["antes","durante","depois"].map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs text-zinc-700 dark:text-zinc-400 capitalize font-medium",children:e}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{var r;let t=null==(r=a.target.files)?void 0:r[0];t&&w(t,a=>y(e,a))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",id:"revitalizacao-".concat(e)}),(0,t.jsx)("label",{htmlFor:"revitalizacao-".concat(e),className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-zinc-300 dark:border-zinc-600 rounded-lg cursor-pointer bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-750 hover:border-indigo-500 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,t.jsx)("svg",{className:"w-8 h-8 mb-2 text-zinc-500 dark:text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsxs)("p",{className:"text-xs text-zinc-600 dark:text-zinc-400 text-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Clique para adicionar"}),(0,t.jsx)("br",{}),"foto da etapa ",e]})]})})]}),j[e]&&(0,t.jsx)("div",{className:"w-full h-32 border border-zinc-300 dark:border-zinc-600 rounded overflow-hidden mt-2",children:(0,t.jsx)("img",{src:j[e],alt:"Revitaliza\xe7\xe3o - ".concat(e),className:"w-full h-full object-cover"})})]},e))})]}),(0,t.jsxs)("div",{className:"pt-2 flex gap-3",children:[(0,t.jsxs)("button",{onClick:A,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"\uD83D\uDCBE Salvar"]}),(0,t.jsx)("button",{onClick:()=>window.history.back(),className:"bg-zinc-600 hover:bg-zinc-500 text-white px-4 py-2 rounded",children:"Voltar"})]})]})})}},8209:(e,a,r)=>{"use strict";r.d(a,{A:()=>n,Y:()=>s});var t=r(2115),o=r(3361);let i={"marcos.silva":"marcos.silva@limpebras.com",admin:"admin@test.com","admin@test.com":"admin@test.com",usuario1:"usuario1@limpebras.com",usuario2:"usuario2@limpebras.com"};function n(){let[e,a]=(0,t.useState)({isAuthenticated:!1,user:null,isLoading:!0,login:async()=>!1,logout:()=>{},isAdmin:!1});(0,t.useEffect)(()=>{localStorage.getItem("auth_token")?(o.y1.initToken(),o.y1.getProfile().then(e=>{a(a=>({...a,isAuthenticated:!0,user:{id:e.id,nome:e.nome,email:e.email,username:e.email.split("@")[0],role:e.role,created_at:e.created_at},isLoading:!1,isAdmin:"admin"===e.role}))}).catch(e=>{console.error("Token inv\xe1lido:",e),localStorage.removeItem("auth_token"),a(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))})):a(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))},[]);let r=async(e,r)=>{try{let t=i[e]||e,n=await o.y1.login(t,r);if(n.token&&n.user)return a(a=>({...a,isAuthenticated:!0,user:{id:n.user.id,nome:n.user.nome,email:n.user.email,username:e,role:n.user.role},isLoading:!1,isAdmin:"admin"===n.user.role})),console.log("Login successful, user authenticated:",n.user),!0;return console.log("Login failed - invalid response"),!1}catch(e){return console.error("Erro no login:",e),!1}};return{...e,login:r,logout:()=>{o.y1.logout(),a(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))},isAdmin:e.isAdmin}}function s(){let[e,a]=(0,t.useState)([]),[r,i]=(0,t.useState)(!1),n=async()=>{try{i(!0),a([])}catch(e){console.error("Erro ao carregar usu\xe1rios:",e)}finally{i(!1)}};return(0,t.useEffect)(()=>{n()},[]),{users:e,loading:r,addUser:async e=>{try{let a=await o.y1.register(e);return await n(),a.user}catch(e){throw console.error("Erro ao adicionar usu\xe1rio:",e),e}},updateUser:async(e,a)=>{try{await o.y1.updateProfile(a),await n()}catch(e){throw console.error("Erro ao atualizar usu\xe1rio:",e),e}},deleteUser:async e=>{try{await n()}catch(e){throw console.error("Erro ao deletar usu\xe1rio:",e),e}},toggleUserStatus:async e=>{try{await n()}catch(e){throw console.error("Erro ao alterar status do usu\xe1rio:",e),e}},refreshUsers:n}}}},e=>{e.O(0,[3038,5579,4020,4744,1061,7018,3372,8441,1255,7358],()=>e(e.s=3220)),_N_E=e.O()}]);