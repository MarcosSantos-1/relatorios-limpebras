(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5962],{63:(e,o,r)=>{"use strict";var t=r(7260);r.o(t,"usePathname")&&r.d(o,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(o,{useRouter:function(){return t.useRouter}})},3202:(e,o,r)=>{"use strict";r.r(o),r.d(o,{default:()=>u});var t=r(5155),a=r(2115),n=r(3372),i=r(6020),s=r(9675),l=r(9767),c=r(4589),d=r(4744);function u(){let[e,o]=(0,a.useState)(""),[r,u]=(0,a.useState)(null),[m,g]=(0,a.useState)(null),[h,x]=(0,a.useState)("SP"),[p,f]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[z,k]=(0,a.useState)([]);function j(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return new Promise(t=>{let a=document.createElement("canvas"),n=a.getContext("2d"),i=new Image;i.onload=()=>{let{width:s,height:l}=i;s>o&&(l=l*o/s,s=o),l>600&&(s=600*s/l,l=600),a.width=s,a.height=l,null==n||n.drawImage(i,0,0,s,l);let c=a.toDataURL("image/jpeg",r);console.log("\uD83D\uDCF8 Imagem comprimida: ".concat(e.size," bytes → ").concat(c.length," bytes")),t(c)},i.src=URL.createObjectURL(e)})}function N(e,o,r){k(t=>t.map((t,a)=>a===e?{...t,[o]:r,ordem:a+1}:t))}async function A(){if(!e)return void d.oR.error("Por favor, selecione o assunto do relat\xf3rio.");if(!r)return void d.oR.error("Por favor, selecione a data de in\xedcio.");let o=Date.now(),t=(0,s.A)(),a={Acumulador:"ACUMULADOR",Desfazimento:"DESFAZIMENTO",Alagamentos:"ALAGAMENTOS",Zeladoria:"ZELADORIA","Registros Fotogr\xe1ficos":"REGISTROS_FOTOGRAFICOS"},l=a[e]||"ACUMULADOR",c=r.toISOString().split("T")[0],u=m?m.toISOString().split("T")[0]:c;console.log("\uD83D\uDD0D Debug mapeamento:"),console.log("- assunto:",e),console.log("- tipoServico mapeado:",l),console.log("- dataInicio:",c),console.log("- dataTermino:",u);let g={id:t,title:"".concat(e," - ").concat(i.iU[h]," - ").concat(r.toLocaleDateString("pt-BR")),tipoServico:l,assunto:e,dataInicio:c,dataTermino:u,sub:h,local:p,descricao:b,fotos:z.filter(e=>e.url).map(e=>({url:e.url,descricao:e.descricao||""})),createdAt:o,updatedAt:o};console.log("=== SALVANDO REGISTRO ==="),console.log("Relat\xf3rio a ser salvo:",g),console.log("Fotos filtradas:",z.filter(e=>e.url)),console.log("Tipo de servi\xe7o mapeado:",a[e]);let x=new Blob([JSON.stringify(g)]).size,f=x/1048576;console.log("\uD83D\uDCCA Tamanho do documento: ".concat(x," bytes (").concat(f.toFixed(2)," MB)")),console.log("\uD83D\uDCCA Tamanho do documento: ".concat(x," bytes (").concat(f.toFixed(2)," MB) - Sem valida\xe7\xe3o de limite"));try{console.log("\uD83D\uDE80 Chamando upsertReport...");let e=await (0,n.wt)(g);console.log("✅ Registro salvo com sucesso! ID:",e.id),d.oR.success("Relat\xf3rio salvo com sucesso!"),window.location.href="/relatorios"}catch(e){console.error("❌ Erro ao salvar relat\xf3rio:",e),d.oR.error("Erro ao salvar: ".concat(e));try{console.log("\uD83E\uDDF9 Tentando limpar relat\xf3rios antigos..."),await (0,n.gI)(),console.log("\uD83D\uDD04 Tentando salvar novamente...");let e=await (0,n.wt)(g);console.log("✅ Registro salvo na segunda tentativa! ID:",e.id),d.oR.success("Relat\xf3rio salvo com sucesso!"),window.location.href="/relatorios"}catch(e){console.error("❌ Erro persistente:",e),d.oR.error("Erro persistente: ".concat(e,". Por favor, tente novamente com menos fotos."))}}}return(0,t.jsx)(c.K,{requiredRole:"admin",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-600 rounded-xl p-6 text-white shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,t.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"\uD83D\uDCCB Novo Registro/Evid\xeancia"}),(0,t.jsx)("p",{className:"text-blue-100",children:"Documente evid\xeancias e registros de servi\xe7os executados"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Assunto"}),(0,t.jsxs)("select",{value:e,onChange:e=>o(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md",children:[(0,t.jsx)("option",{value:"",children:"Selecione o assunto"}),i.DZ.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Sub-regi\xe3o"}),(0,t.jsxs)("select",{value:h,onChange:e=>x(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md",children:[(0,t.jsx)("option",{value:"SP",children:i.iU.SP}),(0,t.jsx)("option",{value:"CV",children:i.iU.CV}),(0,t.jsx)("option",{value:"JT",children:i.iU.JT}),(0,t.jsx)("option",{value:"MG",children:i.iU.MG}),(0,t.jsx)("option",{value:"ST",children:i.iU.ST})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Per\xedodo"}),(0,t.jsx)(l.U,{startDate:r,endDate:m,onStartDateChange:u,onEndDateChange:g,placeholder:"Selecione o per\xedodo"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 md:col-span-2",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Local / Endere\xe7o"}),(0,t.jsx)("input",{value:p,onChange:e=>f(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Descri\xe7\xe3o"}),(0,t.jsx)("textarea",{value:b,onChange:e=>v(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 min-h-24 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"font-medium",children:["Fotos do Registro (",z.length,"/20)"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let o=e.target.files;o&&o.length>0&&function(e){let o=Array.from(e);if(z.length+o.length>20)return d.oR.error("\uD83D\uDCF8 Voc\xea pode adicionar no m\xe1ximo 20 fotos. Atualmente voc\xea tem ".concat(z.length," foto(s)."),{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark",style:{background:"#dc2626",border:"1px solid #ef4444",color:"#f9fafb"}});let r=o.sort((e,o)=>{let r=e=>{let o=e.match(/(\d+)/);return o?parseInt(o[1]):0},t=r(e.name),a=r(o.name);return t>0&&a>0?t-a:e.name.localeCompare(o.name)}),t=z.length;r.forEach((e,o)=>{if(e.size>5242880)return void d.oR.error("\uD83D\uDCC1 Arquivo ".concat(e.name," muito grande. Por favor, selecione uma imagem menor que 5MB."),{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark",style:{background:"#dc2626",border:"1px solid #ef4444",color:"#f9fafb"}});setTimeout(()=>{j(e,800,.7).then(e=>{k(o=>{let r={url:e,descricao:"",ordem:t+1};return t++,[...o,r]})})},100*o)})}(o)},className:"hidden",id:"multiple-photo-upload",disabled:z.length>=20}),(0,t.jsxs)("label",{htmlFor:"multiple-photo-upload",className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium cursor-pointer transition-all duration-200 shadow-lg ".concat(z.length>=20?"bg-zinc-500 text-zinc-300 cursor-not-allowed shadow-none":"bg-indigo-600 hover:bg-indigo-500 hover:shadow-indigo-500/25 text-white hover:scale-105"),children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Adicionar Foto"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[z.map((e,o)=>(0,t.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded p-3 space-y-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-end",children:(0,t.jsx)("button",{onClick:()=>{k(e=>e.filter((e,r)=>r!==o))},className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium",children:"Remover"})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs text-zinc-700 dark:text-zinc-400 font-medium",children:"Upload da Foto"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];t&&j(t,800,.8).then(e=>N(o,"url",e))},className:"text-sm text-zinc-700 dark:text-zinc-300 w-full bg-zinc-200 dark:bg-zinc-800 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-medium transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md"}),e.url&&(0,t.jsx)("div",{className:"w-full h-32 border border-zinc-300 dark:border-zinc-600 rounded overflow-hidden",children:(0,t.jsx)("img",{src:e.url,alt:"Foto ".concat(o+1),className:"w-full h-full object-cover"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs text-zinc-700 dark:text-zinc-400 font-medium",children:"Descri\xe7\xe3o da Foto"}),(0,t.jsx)("input",{type:"text",value:e.descricao,onChange:e=>N(o,"descricao",e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 w-full font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md",placeholder:"Descri\xe7\xe3o da foto"})]})]})]},o)),0===z.length&&(0,t.jsxs)("label",{htmlFor:"multiple-photo-upload",className:"flex flex-col items-center justify-center text-center text-zinc-600 dark:text-zinc-400 py-16 border-2 border-dashed border-zinc-300 dark:border-zinc-700 rounded-lg bg-zinc-100 dark:bg-zinc-900/50 cursor-pointer hover:border-indigo-500 hover:bg-zinc-200 dark:hover:bg-zinc-900/70 transition-all duration-200 group",children:[(0,t.jsx)("svg",{className:"w-16 h-16 mx-auto mb-6 text-zinc-500 dark:text-zinc-400 group-hover:text-indigo-500 dark:group-hover:text-indigo-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-xl font-semibold mb-3 group-hover:text-indigo-600 dark:group-hover:text-indigo-300 transition-colors",children:"Nenhuma foto adicionada"}),(0,t.jsx)("p",{className:"text-base mb-4 group-hover:text-indigo-500 dark:group-hover:text-indigo-200 transition-colors",children:"Clique aqui ou use o bot\xe3o acima para adicionar suas evid\xeancias"}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-medium transition-colors",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Adicionar Fotos"]}),(0,t.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-500 mt-4",children:"M\xe1ximo de 20 fotos por registro"})]})]})]}),(0,t.jsxs)("div",{className:"pt-2 flex gap-3",children:[(0,t.jsxs)("button",{onClick:A,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"\uD83D\uDCBE Salvar"]}),(0,t.jsx)("button",{onClick:()=>window.history.back(),className:"bg-zinc-600 hover:bg-zinc-500 text-white px-4 py-2 rounded",children:"Voltar"})]})]})})}},4453:(e,o,r)=>{Promise.resolve().then(r.bind(r,3202))},4589:(e,o,r)=>{"use strict";r.d(o,{K:()=>s});var t=r(5155),a=r(8209),n=r(63),i=r(2115);function s(e){let{children:o,requiredRole:r="user",fallbackPath:s="/relatorios"}=e,{isAuthenticated:l,isAdmin:c,isLoading:d}=(0,a.A)(),u=(0,n.useRouter)();if((0,i.useEffect)(()=>{if(!d&&l){let e=!1;switch(r){case"host":case"admin":e=c;break;case"user":e=!0}e||u.push(s)}},[l,c,d,r,s,u]),d)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Verificando permiss\xf5es..."})]})});if(!l)return null;let m=!1;switch(r){case"host":case"admin":m=c;break;case"user":m=!0}return m?(0,t.jsx)(t.Fragment,{children:o}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center bg-white dark:bg-slate-800 p-8 rounded-xl shadow-lg",children:[(0,t.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\uD83D\uDEAB"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acesso Negado"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina."}),(0,t.jsx)("button",{onClick:()=>u.push(s),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200",children:"Voltar ao In\xedcio"})]})})}},6020:(e,o,r)=>{"use strict";r.d(o,{DZ:()=>n,ZU:()=>i,iU:()=>t,k4:()=>a,zb:()=>s});let t={SP:"S\xc3O PAULO",CV:"CASA VERDE / LIM\xc3O / CACHOEIRINHA",JT:"JA\xc7AN\xc3 / TREMEMB\xc9",MG:"VILA MARIA / VILA GUILHERME",ST:"SANTANA / TUCURUVI"},a={MUTIRAO:"Mutir\xe3o - SELIMP",REVITALIZACAO:"Revitaliza\xe7\xe3o de Pontos Viciados",ACUMULADOR:"A\xe7\xe3o de Acumulador",ALAGAMENTOS:"Limpeza P\xf3s Alagamento",ZELADORIA:"Zeladoria",DDS:"DDS",HIGIENIZACAO:"Higieniza\xe7\xe3o, manuten\xe7\xe3o, instala\xe7\xe3o, remo\xe7\xe3o e reposi\xe7\xe3o de Papeleiras",VARRICAO_MECANIZADA:"Varri\xe7\xe3o Mecanizada",FEIRAS:"Feiras",EVENTOS:"Eventos",ROTINEIROS:"Servi\xe7os Rotineiros"},n=["Acumulador","Alagamentos","Zeladoria"],i=["Capina\xe7\xe3o e Ro\xe7agem","Cata Bagulho","Coleta manual e transporte de materiais diversos/entulho","Coleta mecanizada e transporte de materiais diversos e de entulho","Grandes Objetos - Coleta e transporte de objetos volumosos","Higieniza\xe7\xe3o, manuten\xe7\xe3o, instala\xe7\xe3o, remo\xe7\xe3o e reposi\xe7\xe3o de Papeleiras","Lavagem Especial de Equipamentos P\xfablicos","Limpeza de Boca de Lobo","Mutir\xe3o","Raspagem da terra e areia nas sarjetas de vias p\xfablicas","Remo\xe7\xe3o de faixas e propagandas irregulares","Servi\xe7o de pintura de meio fio","Varri\xe7\xe3o Manual de Vias e Logradouros Publicos","Varri\xe7\xe3o Mecanizada","Desfazimento","Varri\xe7\xe3o de Pra\xe7a","Feiras","Ecopontos"],s={CV:["Ecoponto Vila Nova Cachoeirinha","Ecoponto Vila Santa Maria","Ecoponto Parque Peruche","Ecoponto Jardim Ant\xe1rtica","Ecoponto S\xe3o Leandro"],MG:["Ecoponto Vila Sabrina","Ecoponto Vila Guilherme","Ecoponto Vila Maria"],ST:["Ecoponto Santana","Ecoponto Tucuruvi"],JT:["Ecoponto Anselmo Machado","Ecoponto Silvio Bittencourt"]}},8209:(e,o,r)=>{"use strict";r.d(o,{A:()=>i,Y:()=>s});var t=r(2115),a=r(3361);let n={"marcos.silva":"marcos.silva@limpebras.com",admin:"admin@test.com","admin@test.com":"admin@test.com",usuario1:"usuario1@limpebras.com",usuario2:"usuario2@limpebras.com"};function i(){let[e,o]=(0,t.useState)({isAuthenticated:!1,user:null,isLoading:!0,login:async()=>!1,logout:()=>{},isAdmin:!1});(0,t.useEffect)(()=>{localStorage.getItem("auth_token")?(a.y1.initToken(),a.y1.getProfile().then(e=>{o(o=>({...o,isAuthenticated:!0,user:{id:e.id,nome:e.nome,email:e.email,username:e.email.split("@")[0],role:e.role,created_at:e.created_at},isLoading:!1,isAdmin:"admin"===e.role}))}).catch(e=>{console.error("Token inv\xe1lido:",e),localStorage.removeItem("auth_token"),o(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))})):o(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))},[]);let r=async(e,r)=>{try{let t=n[e]||e,i=await a.y1.login(t,r);if(i.token&&i.user)return o(o=>({...o,isAuthenticated:!0,user:{id:i.user.id,nome:i.user.nome,email:i.user.email,username:e,role:i.user.role},isLoading:!1,isAdmin:"admin"===i.user.role})),console.log("Login successful, user authenticated:",i.user),!0;return console.log("Login failed - invalid response"),!1}catch(e){return console.error("Erro no login:",e),!1}};return{...e,login:r,logout:()=>{a.y1.logout(),o(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))},isAdmin:e.isAdmin}}function s(){let[e,o]=(0,t.useState)([]),[r,n]=(0,t.useState)(!1),i=async()=>{try{n(!0),o([])}catch(e){console.error("Erro ao carregar usu\xe1rios:",e)}finally{n(!1)}};return(0,t.useEffect)(()=>{i()},[]),{users:e,loading:r,addUser:async e=>{try{let o=await a.y1.register(e);return await i(),o.user}catch(e){throw console.error("Erro ao adicionar usu\xe1rio:",e),e}},updateUser:async(e,o)=>{try{await a.y1.updateProfile(o),await i()}catch(e){throw console.error("Erro ao atualizar usu\xe1rio:",e),e}},deleteUser:async e=>{try{await i()}catch(e){throw console.error("Erro ao deletar usu\xe1rio:",e),e}},toggleUserStatus:async e=>{try{await i()}catch(e){throw console.error("Erro ao alterar status do usu\xe1rio:",e),e}},refreshUsers:i}}},9675:(e,o,r)=>{"use strict";let t;r.d(o,{A:()=>s});let a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},n=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let s=function(e,o,r){if(a.randomUUID&&!o&&!e)return a.randomUUID();var s=e,l=r;let c=(s=s||{}).random??s.rng?.()??function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(n)}();if(c.length<16)throw Error("Random bytes length must be >= 16");if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,o){if((l=l||0)<0||l+16>o.length)throw RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);for(let e=0;e<16;++e)o[l+e]=c[e];return o}return function(e,o=0){return(i[e[o+0]]+i[e[o+1]]+i[e[o+2]]+i[e[o+3]]+"-"+i[e[o+4]]+i[e[o+5]]+"-"+i[e[o+6]]+i[e[o+7]]+"-"+i[e[o+8]]+i[e[o+9]]+"-"+i[e[o+10]]+i[e[o+11]]+i[e[o+12]]+i[e[o+13]]+i[e[o+14]]+i[e[o+15]]).toLowerCase()}(c)}},9767:(e,o,r)=>{"use strict";r.d(o,{U:()=>i});var t=r(5155),a=r(2115),n=r(740);function i(e){let{startDate:o,endDate:r,onStartDateChange:i,onEndDateChange:s,placeholder:l="Selecione o per\xedodo",className:c=""}=e,[d,u]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"relative ".concat(c),children:[(0,t.jsxs)("button",{type:"button",onClick:()=>u(!d),className:"w-full bg-zinc-800 text-zinc-100 px-3 py-2 rounded border border-zinc-700 text-left flex items-center justify-between",children:[(0,t.jsx)("span",{className:o||r?"text-zinc-100":"text-zinc-400",children:o||r?o&&!r?o.toLocaleDateString("pt-BR"):!o&&r?r.toLocaleDateString("pt-BR"):o&&r?o.getTime()===r.getTime()?o.toLocaleDateString("pt-BR"):"".concat(o.toLocaleDateString("pt-BR")," a ").concat(r.toLocaleDateString("pt-BR")):l:l}),(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),d&&(0,t.jsxs)("div",{className:"absolute top-full left-0 mt-1 bg-zinc-800 border border-zinc-700 rounded shadow-lg z-50 p-4",children:[(0,t.jsx)(n.Ay,{selected:o,onChange:e=>{let[o,r]=e;i(o),s(r)},startDate:o,endDate:r,selectsRange:!0,inline:!0,dateFormat:"dd/MM/yyyy"}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)("button",{onClick:()=>{i(null),s(null)},className:"text-xs text-zinc-400 hover:text-zinc-300",children:"Limpar"}),(0,t.jsx)("button",{onClick:()=>u(!1),className:"text-xs bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1 rounded",children:"Confirmar"})]})]})]})}r(9157)}},e=>{e.O(0,[3038,5579,4020,4744,1061,3372,8441,1255,7358],()=>e(e.s=4453)),_N_E=e.O()}]);