(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2288],{2357:(e,r,t)=>{Promise.resolve().then(t.bind(t,4076))},4076:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(5155),o=t(2115),s=t(3372),i=t(6020),n=t(9675),l=t(4389),c=t(4589),d=t(4744);function u(){let[e,r]=(0,o.useState)("Servi\xe7os Rotineiros"),[t,u]=(0,o.useState)(null),[m,h]=(0,o.useState)(null),[g,p]=(0,o.useState)("SP"),[x,b]=(0,o.useState)("semana"),[f,v]=(0,o.useState)([]),[k,j]=(0,o.useState)(!1),N=async()=>{if(!t||!m)return void d.oR.error("Por favor, selecione o per\xedodo (data in\xedcio e fim).");if(0===f.length)return void d.oR.error("Nenhum dia foi gerado para o per\xedodo selecionado.");let r=f.filter(e=>e.servicos.length>0);if(0===r.length)return void d.oR.error("Por favor, selecione pelo menos um servi\xe7o para pelo menos um dia.");j(!0);let a=0,o=0;try{for(let t of r){let r=Date.now(),i=(0,n.A)(),l=t.servicos.map(e=>({assunto:e,fotos:(t.fotos[e]||[]).map(e=>({url:e,descricao:""})),observacao:""})),c={id:i,tipoServico:"ROTINEIROS",assunto:e,data:t.data,sub:g,servicos:l,createdAt:r,updatedAt:r};try{await (0,s.wt)(c),a++}catch(e){console.error("Erro ao salvar relat\xf3rio do dia ".concat(t.data,":"),e),o++}}if(o>0){for(let t of(d.oR.warning("Alguns registros falharam. Tentando limpar relat\xf3rios antigos..."),await (0,s.gI)(),r))if(o>0){let r=Date.now(),i=(0,n.A)(),l=t.servicos.map(e=>({assunto:e,fotos:(t.fotos[e]||[]).map(e=>({url:e,descricao:""})),observacao:""})),c={id:i,tipoServico:"ROTINEIROS",assunto:e,data:t.data,sub:g,servicos:l,createdAt:r,updatedAt:r};try{await (0,s.wt)(c),a++,o--}catch(e){console.error("Erro persistente no dia ".concat(t.data,":"),e)}}}a>0?(d.oR.success("".concat(a," relat\xf3rio(s) salvo(s) com sucesso!")),o>0&&d.oR.error("".concat(o," relat\xf3rio(s) falharam. Verifique o console para detalhes.")),setTimeout(()=>{window.location.href="/relatorios"},2e3)):d.oR.error("Nenhum relat\xf3rio foi salvo. Tente novamente com menos fotos.")}catch(e){console.error("Erro geral ao salvar relat\xf3rios:",e),d.oR.error("Erro ao salvar relat\xf3rios. Tente novamente.")}finally{j(!1)}};return(0,a.jsx)(c.K,{requiredRole:"admin",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-600 rounded-xl p-6 text-white shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,a.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"⚡ Registro em Lote - Servi\xe7os Rotineiros"}),(0,a.jsx)("p",{className:"text-blue-100",children:"Registre m\xfaltiplos dias de servi\xe7os rotineiros de uma vez"})]})]})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-6 border border-zinc-200 dark:border-zinc-700",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:"\uD83D\uDCC5 Configura\xe7\xe3o do Per\xedodo"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Assunto"}),(0,a.jsx)("input",{value:e,disabled:!0,className:"bg-zinc-200 dark:bg-zinc-700 text-zinc-900 dark:text-zinc-300 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-600 cursor-not-allowed font-semibold"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Subprefeitura"}),(0,a.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 px-3 py-2 rounded border border-zinc-300 dark:border-zinc-700 font-semibold transition-all duration-200 focus:border-zinc-500 dark:focus:border-zinc-500 focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 focus:shadow-md",children:[(0,a.jsx)("option",{value:"SP",children:i.iU.SP}),(0,a.jsx)("option",{value:"CV",children:i.iU.CV}),(0,a.jsx)("option",{value:"JT",children:i.iU.JT}),(0,a.jsx)("option",{value:"MG",children:i.iU.MG}),(0,a.jsx)("option",{value:"ST",children:i.iU.ST})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Data In\xedcio"}),(0,a.jsx)(l.A,{selectedDate:t,onChange:u,placeholder:"Selecione a data in\xedcio"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{className:"text-xs text-black dark:text-zinc-400 font-bold",children:"Data Fim"}),(0,a.jsx)(l.A,{selectedDate:m,onChange:h,placeholder:"Selecione a data fim"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{t&&m&&v((()=>{if(!t||!m)return[];let e=[],r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(m.getFullYear(),m.getMonth(),m.getDate());for(;r<=a;){let t=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),o=String(r.getDate()).padStart(2,"0"),s="".concat(t,"-").concat(a,"-").concat(o);e.push({data:s,servicos:[],fotos:{}}),r.setDate(r.getDate()+1)}return e})())},disabled:!t||!m,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-zinc-400 disabled:cursor-not-allowed text-white px-4 py-2 rounded flex items-center gap-2",children:"\uD83D\uDD04 Gerar Dias do Per\xedodo"}),f.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,a.jsxs)("span",{children:["\uD83D\uDCCA ",f.length," dias gerados"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[f.filter(e=>e.servicos.length>0).length," com servi\xe7os"]})]})]})]}),f.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:"\uD83D\uDCCB Servi\xe7os por Dia"}),(0,a.jsx)("div",{className:"space-y-6",children:f.map((e,r)=>(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-6 border border-zinc-200 dark:border-zinc-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:["\uD83D\uDCC5 ",(e=>{let[r,t,a]=e.split("-").map(Number);return new Date(r,t-1,a).toLocaleDateString("pt-BR",{weekday:"short",day:"2-digit",month:"2-digit"})})(e.data)]}),(0,a.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[e.servicos.length," servi\xe7o(s) selecionado(s)"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.ZU.map(t=>{var o;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"servico-".concat(r,"-").concat(t),checked:e.servicos.includes(t),onChange:()=>{v(e=>{let a=[...e],o=a[r],s={...o,servicos:[...o.servicos]};if(s.servicos.includes(t)){let{[t]:e,...r}=s.fotos;s.servicos=s.servicos.filter(e=>e!==t),s.fotos=r}else s.servicos.push(t);return a[r]=s,a})},className:"w-4 h-4 text-blue-600 bg-zinc-100 border-zinc-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-zinc-800 focus:ring-2 dark:bg-zinc-700 dark:border-zinc-600"}),(0,a.jsx)("label",{htmlFor:"servico-".concat(r,"-").concat(t),className:"text-sm font-medium text-zinc-900 dark:text-zinc-300 cursor-pointer",children:t})]}),e.servicos.includes(t)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:["Fotos: ",(null==(o=e.fotos[t])?void 0:o.length)||0,"/10"]}),(0,a.jsx)("button",{onClick:()=>((e,r)=>{let t=document.createElement("input");t.type="file",t.accept="image/*",t.multiple=!0,t.onchange=t=>{let a=t.target.files;if(a&&a.length>0){let t=Array.from(a),o=f[e].fotos[r]||[];if(o.length+t.length>10)return void d.oR.error("M\xe1ximo de 10 fotos por servi\xe7o. Voc\xea j\xe1 tem ".concat(o.length," foto(s) para este servi\xe7o."));t.forEach((t,a)=>{(function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.7;return new Promise(a=>{let o=document.createElement("canvas"),s=o.getContext("2d"),i=new Image;i.onload=()=>{let{width:e,height:n}=i;e>r&&(n=n*r/e,e=r),o.width=e,o.height=n,null==s||s.drawImage(i,0,0,e,n),a(o.toDataURL("image/jpeg",t))},i.src=URL.createObjectURL(e)})})(t,800,.8).then(t=>{v(a=>{let o=[...a],s={...o[e]};return s.fotos={...s.fotos,[r]:[...s.fotos[r]||[],t]},o[e]=s,o})})})}},t.click()})(r,t),className:"text-xs bg-blue-600 hover:bg-blue-500 text-white px-2 py-1 rounded",children:"\uD83D\uDCF8 Adicionar Fotos"})]}),e.fotos[t]&&e.fotos[t].length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.fotos[t].map((e,o)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e,alt:"".concat(t," - Foto ").concat(o+1),className:"w-full h-20 object-cover rounded border border-zinc-300 dark:border-zinc-600"}),(0,a.jsx)("button",{onClick:()=>{v(e=>{var a;let s=[...e],i={...s[r]};return i.fotos={...i.fotos,[t]:(null==(a=i.fotos[t])?void 0:a.filter((e,r)=>r!==o))||[]},s[r]=i,s})},className:"absolute -top-1 -right-1 bg-red-600 hover:bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"\xd7"})]},o))})]})]},t)})})]},e.data))})]}),(0,a.jsxs)("div",{className:"pt-4 flex gap-3",children:[(0,a.jsx)("button",{onClick:N,disabled:k||0===f.filter(e=>e.servicos.length>0).length,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-zinc-400 disabled:cursor-not-allowed text-white px-6 py-3 rounded flex items-center gap-2 font-semibold",children:k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Salvando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"\uD83D\uDCBE Salvar Todos os Registros"]})}),(0,a.jsx)("button",{onClick:()=>window.history.back(),className:"bg-zinc-600 hover:bg-zinc-500 text-white px-6 py-3 rounded font-semibold",children:"Voltar"})]}),f.length>0&&(0,a.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"\uD83D\uDCCA Resumo do Registro em Lote"}),(0,a.jsxs)("div",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Per\xedodo:"})," ",null==t?void 0:t.toLocaleDateString("pt-BR")," a ",null==m?void 0:m.toLocaleDateString("pt-BR")]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Subprefeitura:"})," ",i.iU[g]]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total de dias:"})," ",f.length]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Dias com servi\xe7os:"})," ",f.filter(e=>e.servicos.length>0).length]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total de servi\xe7os:"})," ",f.reduce((e,r)=>e+r.servicos.length,0)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total de fotos:"})," ",f.reduce((e,r)=>e+Object.values(r.fotos).reduce((e,r)=>e+r.length,0),0)]})]})]})]})})}},4389:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(5155),o=t(8661),s=t.n(o),i=t(2115),n=t(740);function l(e){let{selectedDate:r,onChange:t,placeholder:o="Selecione uma data",className:l=""}=e,[c,d]=(0,i.useState)(!1);return(0,a.jsxs)("div",{className:"jsx-e84ae2c801487fae "+"relative ".concat(l),children:[(0,a.jsx)(n.Ay,{selected:r,onChange:e=>{t(e),d(!1)},onCalendarOpen:()=>d(!0),onCalendarClose:()=>d(!1),open:c,placeholderText:o,dateFormat:"dd/MM/yyyy",showPopperArrow:!1,popperClassName:"custom-datepicker-popper",className:"w-full px-3 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 font-semibold transition-all duration-200 focus:border-indigo-500 dark:focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:focus:ring-indigo-700 focus:shadow-md cursor-pointer",calendarClassName:"custom-datepicker-calendar",dayClassName:e=>{let t=new Date,a=e.toDateString()===t.toDateString(),o=r&&e.toDateString()===r.toDateString(),s="hover:bg-indigo-100 dark:hover:bg-indigo-900 rounded-lg transition-colors duration-200";return a&&(s+=" bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 font-semibold"),o&&(s+=" bg-indigo-500 text-white font-bold"),s},renderCustomHeader:e=>{let{date:r,decreaseMonth:t,increaseMonth:o,prevMonthButtonDisabled:s,nextMonthButtonDisabled:i}=e;return(0,a.jsxs)("div",{className:"jsx-e84ae2c801487fae flex items-center justify-between p-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-t-lg",children:[(0,a.jsx)("button",{onClick:t,disabled:s,className:"jsx-e84ae2c801487fae p-2 rounded-lg hover:bg-white/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-e84ae2c801487fae w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",className:"jsx-e84ae2c801487fae"})})}),(0,a.jsx)("div",{className:"jsx-e84ae2c801487fae text-lg font-bold",children:r.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),(0,a.jsx)("button",{onClick:o,disabled:i,className:"jsx-e84ae2c801487fae p-2 rounded-lg hover:bg-white/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-e84ae2c801487fae w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:"jsx-e84ae2c801487fae"})})})]})}}),(0,a.jsx)(s(),{id:"e84ae2c801487fae",children:".custom-datepicker-popper{z-index:9999!important}.custom-datepicker-calendar{border:none!important;border-radius:.75rem!important;box-shadow:0 10px 25px rgba(0,0,0,.15)!important;overflow:hidden!important}.react-datepicker{border:none!important;font-family:inherit!important}.react-datepicker__header{background:transparent!important;border:none!important;padding:0!important}.react-datepicker__month-container{background:white!important}.dark .react-datepicker__month-container{background:#1f2937!important}.react-datepicker__day-names{background:#f8fafc!important;padding:.5rem 0!important}.dark .react-datepicker__day-names{background:#374151!important}.react-datepicker__day-name{color:#6b7280!important;font-weight:600!important;font-size:.875rem!important}.dark .react-datepicker__day-name{color:#9ca3af!important}.react-datepicker__day{color:#374151!important;font-weight:500!important;border-radius:.5rem!important;margin:.125rem!important;width:2rem!important;height:2rem!important;line-height:2rem!important;transition:all.2s ease!important}.dark .react-datepicker__day{color:#d1d5db!important}.react-datepicker__day:hover{background-color:#e0e7ff!important;color:#3730a3!important}.dark .react-datepicker__day:hover{background-color:#4338ca!important;color:#fff!important}.react-datepicker__day--selected{background-color:#6366f1!important;color:#fff!important;font-weight:700!important}.react-datepicker__day--today{background-color:#dbeafe!important;color:#1e40af!important;font-weight:600!important}.dark .react-datepicker__day--today{background-color:#1e3a8a!important;color:#dbeafe!important}.react-datepicker__day--outside-month{color:#9ca3af!important}.dark .react-datepicker__day--outside-month{color:#6b7280!important}.react-datepicker__day--disabled{color:#d1d5db!important;cursor:not-allowed!important}.dark .react-datepicker__day--disabled{color:#4b5563!important}"})]})}t(9157)},4589:(e,r,t)=>{"use strict";t.d(r,{K:()=>n});var a=t(5155),o=t(8209),s=t(63),i=t(2115);function n(e){let{children:r,requiredRole:t="user",fallbackPath:n="/relatorios"}=e,{isAuthenticated:l,isAdmin:c,isLoading:d}=(0,o.A)(),u=(0,s.useRouter)();if((0,i.useEffect)(()=>{if(!d&&l){let e=!1;switch(t){case"host":case"admin":e=c;break;case"user":e=!0}e||u.push(n)}},[l,c,d,t,n,u]),d)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Verificando permiss\xf5es..."})]})});if(!l)return null;let m=!1;switch(t){case"host":case"admin":m=c;break;case"user":m=!0}return m?(0,a.jsx)(a.Fragment,{children:r}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center bg-white dark:bg-slate-800 p-8 rounded-xl shadow-lg",children:[(0,a.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\uD83D\uDEAB"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acesso Negado"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina."}),(0,a.jsx)("button",{onClick:()=>u.push(n),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200",children:"Voltar ao In\xedcio"})]})})}},6020:(e,r,t)=>{"use strict";t.d(r,{DZ:()=>s,ZU:()=>i,iU:()=>a,k4:()=>o,zb:()=>n});let a={SP:"S\xc3O PAULO",CV:"CASA VERDE / LIM\xc3O / CACHOEIRINHA",JT:"JA\xc7AN\xc3 / TREMEMB\xc9",MG:"VILA MARIA / VILA GUILHERME",ST:"SANTANA / TUCURUVI"},o={MUTIRAO:"Mutir\xe3o - SELIMP",REVITALIZACAO:"Revitaliza\xe7\xe3o de Pontos Viciados",ACUMULADOR:"A\xe7\xe3o de Acumulador",ALAGAMENTOS:"Limpeza P\xf3s Alagamento",ZELADORIA:"Zeladoria",DDS:"DDS",HIGIENIZACAO:"Higieniza\xe7\xe3o, manuten\xe7\xe3o, instala\xe7\xe3o, remo\xe7\xe3o e reposi\xe7\xe3o de Papeleiras",VARRICAO_MECANIZADA:"Varri\xe7\xe3o Mecanizada",FEIRAS:"Feiras",EVENTOS:"Eventos",ROTINEIROS:"Servi\xe7os Rotineiros"},s=["Acumulador","Alagamentos","Zeladoria"],i=["Capina\xe7\xe3o e Ro\xe7agem","Cata Bagulho","Coleta manual e transporte de materiais diversos/entulho","Coleta mecanizada e transporte de materiais diversos e de entulho","Grandes Objetos - Coleta e transporte de objetos volumosos","Higieniza\xe7\xe3o, manuten\xe7\xe3o, instala\xe7\xe3o, remo\xe7\xe3o e reposi\xe7\xe3o de Papeleiras","Lavagem Especial de Equipamentos P\xfablicos","Limpeza de Boca de Lobo","Mutir\xe3o","Raspagem da terra e areia nas sarjetas de vias p\xfablicas","Remo\xe7\xe3o de faixas e propagandas irregulares","Servi\xe7o de pintura de meio fio","Varri\xe7\xe3o Manual de Vias e Logradouros Publicos","Varri\xe7\xe3o Mecanizada","Desfazimento","Varri\xe7\xe3o de Pra\xe7a","Feiras","Ecopontos"],n={CV:["Ecoponto Vila Nova Cachoeirinha","Ecoponto Vila Santa Maria","Ecoponto Parque Peruche","Ecoponto Jardim Ant\xe1rtica","Ecoponto S\xe3o Leandro"],MG:["Ecoponto Vila Sabrina","Ecoponto Vila Guilherme","Ecoponto Vila Maria"],ST:["Ecoponto Santana","Ecoponto Tucuruvi"],JT:["Ecoponto Anselmo Machado","Ecoponto Silvio Bittencourt"]}},8209:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,Y:()=>n});var a=t(2115),o=t(3361);let s={"marcos.silva":"marcos.silva@limpebras.com",admin:"admin@test.com","admin@test.com":"admin@test.com",usuario1:"usuario1@limpebras.com",usuario2:"usuario2@limpebras.com"};function i(){let[e,r]=(0,a.useState)({isAuthenticated:!1,user:null,isLoading:!0,login:async()=>!1,logout:()=>{},isAdmin:!1});(0,a.useEffect)(()=>{localStorage.getItem("auth_token")?(o.y1.initToken(),o.y1.getProfile().then(e=>{r(r=>({...r,isAuthenticated:!0,user:{id:e.id,nome:e.nome,email:e.email,username:e.email.split("@")[0],role:e.role,created_at:e.created_at},isLoading:!1,isAdmin:"admin"===e.role}))}).catch(e=>{console.error("Token inv\xe1lido:",e),localStorage.removeItem("auth_token"),r(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))})):r(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))},[]);let t=async(e,t)=>{try{let a=s[e]||e,i=await o.y1.login(a,t);if(i.token&&i.user)return r(r=>({...r,isAuthenticated:!0,user:{id:i.user.id,nome:i.user.nome,email:i.user.email,username:e,role:i.user.role},isLoading:!1,isAdmin:"admin"===i.user.role})),console.log("Login successful, user authenticated:",i.user),!0;return console.log("Login failed - invalid response"),!1}catch(e){return console.error("Erro no login:",e),!1}};return{...e,login:t,logout:()=>{o.y1.logout(),r(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1,isAdmin:!1}))},isAdmin:e.isAdmin}}function n(){let[e,r]=(0,a.useState)([]),[t,s]=(0,a.useState)(!1),i=async()=>{try{s(!0),r([])}catch(e){console.error("Erro ao carregar usu\xe1rios:",e)}finally{s(!1)}};return(0,a.useEffect)(()=>{i()},[]),{users:e,loading:t,addUser:async e=>{try{let r=await o.y1.register(e);return await i(),r.user}catch(e){throw console.error("Erro ao adicionar usu\xe1rio:",e),e}},updateUser:async(e,r)=>{try{await o.y1.updateProfile(r),await i()}catch(e){throw console.error("Erro ao atualizar usu\xe1rio:",e),e}},deleteUser:async e=>{try{await i()}catch(e){throw console.error("Erro ao deletar usu\xe1rio:",e),e}},toggleUserStatus:async e=>{try{await i()}catch(e){throw console.error("Erro ao alterar status do usu\xe1rio:",e),e}},refreshUsers:i}}}},e=>{e.O(0,[3038,5579,4020,4744,1061,4637,3372,8441,1255,7358],()=>e(e.s=2357)),_N_E=e.O()}]);